(this.webpackJsonpgameboard=this.webpackJsonpgameboard||[]).push([[0],{19:function(e,t,a){e.exports=a(38)},24:function(e,t,a){},25:function(e,t,a){},31:function(e,t){},32:function(e,t){},33:function(e,t){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(14),o=a.n(c),i=(a(24),a(11)),l=a(2),s=(a(25),a(3)),d=a(15),u=a(16),m=a(17),f=a(12);a(34);var p=function(e){return r.a.createElement("div",{className:"tray"},r.a.createElement("div",{className:"edit-icon"},r.a.createElement(d.a,{onClick:e.toggleTokens})),r.a.createElement("div",{className:"edit-icon"},r.a.createElement(u.a,{onClick:e.toggleMaps})),r.a.createElement("div",{className:"edit-icon"},r.a.createElement(f.a,{onClick:e.close})),r.a.createElement("div",{className:"edit-icon"},r.a.createElement(m.a,{onClick:e.toggleOptions})))},g=a(4),b=a(7),v=a(8),h=a(10),w=a(9),E=function(e){Object(h.a)(a,e);var t=Object(w.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).drag=function(e){e.dataTransfer.setData("transfer",e.target.src)},e.noAllowDrop=function(e){e.stopPropagation()},e}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,draggable:"true",onDragStart:this.drag,onDragOver:this.noAllowDrop},this.props.children)}}]),a}(r.a.Component),O=function(e){Object(h.a)(a,e);var t=Object(w.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,onDrop:this.props.drop,onDragOver:this.props.allowDrop},this.props.children)}}]),a}(r.a.Component);a(35);var j=function(e){var t="token-drawer";return t="drawerDocked"===e.state?"token-drawer docked":"token-drawer",r.a.createElement("div",{className:t},r.a.createElement("form",{action:"/action_page.php",className:"token-form"},r.a.createElement("label",{for:"token-input"},r.a.createElement("div",{className:"add-icon"},r.a.createElement(g.a,null))),r.a.createElement("input",{id:"token-input",type:"file",onChange:e.getToken})),"Add a token and drop it onto the board.",r.a.createElement("div",{className:"token-container"},e.tokens[0]&&e.tokens.map((function(e,t){return r.a.createElement(O,{id:t+"droppable"},r.a.createElement(E,{id:t+"token"},r.a.createElement("img",{alt:"...",draggable:"true",src:e.src,width:"100",height:"100"})))}))))};a(36);var k=function(e){var t="map-drawer";return t="drawerOpen"===e.state?"map-drawer open":"map-drawer",r.a.createElement("div",{className:t},r.a.createElement("form",{action:"/action_page.php",className:"map-form"},r.a.createElement("label",{for:"file-input"},r.a.createElement("div",{className:"add-icon"},r.a.createElement(g.a,null))),r.a.createElement("input",{id:"file-input",type:"file",onChange:e.getMap})),"Add a map. Switch maps by clicking on the thumbnails.",r.a.createElement("div",{className:"map-container"},e.maps[0]&&e.maps.map((function(t,a){return r.a.createElement("img",{src:t.src,alt:"...",id:a+"map",width:"100",height:"50",onClick:e.changeMap})}))))};a(37);var y=function(e){return r.a.createElement("div",{className:"options"},r.a.createElement("div",null,"Grid Size"),r.a.createElement("div",null,r.a.createElement("input",{type:"range",min:"10",max:"100",class:"slider",onInput:e.scaleGrid.bind(this)})))};var C=function(e){var t=Object(n.useState)("drawerClosed"),a=Object(l.a)(t,2),c=a[0],o=a[1],d=Object(n.useState)("drawerClosed"),u=Object(l.a)(d,2),m=u[0],f=u[1],g=Object(n.useState)(!1),b=Object(l.a)(g,2),v=b[0],h=b[1],w=Object(n.useState)(50),E=Object(l.a)(w,2),C=E[0],D=E[1],N=Object(n.useState)([]),S=Object(l.a)(N,2),A=S[0],I=S[1],M=Object(n.useState)([]),R=Object(l.a)(M,2),L=R[0],T=R[1],W=Object(n.useState)(null),U=Object(l.a)(W,2),x=U[0],B=U[1],G=Object(n.useState)([]),H=Object(l.a)(G,2),F=(H[0],H[1]),J=Object(n.useState)(null),_=Object(l.a)(J,2),z=_[0],P=_[1],X=Object(n.useState)(null),Y=Object(l.a)(X,2),$=Y[0],q=Y[1],K=Object(n.useRef)(null),Q=Object(n.useState)(null),V=Object(l.a)(Q,2),Z=V[0],ee=V[1];function te(){"drawerOpen"===m&&ae(),o("drawerClosed"===c?"drawerDocked":"drawerClosed")}function ae(){"drawerDocked"===c&&te(),f("drawerClosed"===m?"drawerOpen":"drawerClosed")}function ne(e,t,a){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:C,r=0;r<t/n;r++)e.add(new s.fabric.Line([r*n,0,r*n,a],{stroke:"616161",selectable:!1})),e.add(new s.fabric.Line([0,r*n,t,r*n],{stroke:"616161",selectable:!1}));e.on("object:moving",(function(e){e.target.set({left:Math.round(e.target.left/n)*n,top:Math.round(e.target.top/n)*n})}))}function re(e){if(e){var t=z/2-e.width/2,a=$/2-e.height/2;s.fabric.Image.fromURL(e.src,(function(e){var n=e.set({left:t,top:a,selectable:!1}).scale(1);Z.setBackgroundImage(n),Z.renderAll()}))}}return Object(n.useEffect)((function(){P(document.body.clientWidth),q(document.body.clientHeight);var e=new s.fabric.Canvas("c",{selection:!1});ee(e),ne(e,document.body.clientWidth,document.body.clientHeight)}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(p,{toggleTokens:te,toggleMaps:ae,toggleOptions:function(){h(!v)},close:function(){h(!1),o("drawerClosed"),f("drawerClosed")}}),v&&r.a.createElement(y,{scaleGrid:function(e){var t=parseInt(e.target.value),a=Z.getObjects("line");for(var n in a)Z.remove(a[n]);re(x),ne(Z,z,$,t),Z.renderAll(),D(t)}}),r.a.createElement(j,{state:c,getToken:function(e){for(var t=e.target.files,a=t.length,n=function(){var e=new FileReader,a=t[r];e.onloadend=function(){var t=new Image;t.src=e.result,T((function(e){return[].concat(Object(i.a)(e),[t])}))},e.readAsDataURL(a)},r=0;r<a;r++)n()},tokens:L}),r.a.createElement(k,{state:m,getMap:function(e){for(var t=e.target.files,a=t.length,n=function(){var e=new FileReader,a=t[r];e.onloadend=function(){var t=new Image;t.src=e.result,x||(B(t),t.onload=function(){re(t)}),I((function(e){return[].concat(Object(i.a)(e),[t])}))},e.readAsDataURL(a)},r=0;r<a;r++)n()},maps:A,changeMap:function(e){var t=A[e.target.id[0]];B(t),re(t)}}),r.a.createElement(O,{drop:function(e){e.preventDefault();var t=e.dataTransfer.getData("transfer"),a=new Image;a.src=t;var n=e.clientX,r=e.clientY,c={src:a,x:n,y:r};F((function(e){return[].concat(Object(i.a)(e),[c])})),function(e,t,a){s.fabric.Image.fromURL(e.src,(function(e){var n=e.set({left:t,top:a});Z.add(n),Z.renderAll()}))}(a,n,r)},allowDrop:function(e){e.preventDefault()}},r.a.createElement("canvas",{id:"c",width:document.body.clientWidth,ref:K,height:document.body.clientHeight})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.9475e6ab.chunk.js.map