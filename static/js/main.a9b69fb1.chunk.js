(this.webpackJsonpgameboard=this.webpackJsonpgameboard||[]).push([[0],{116:function(e,t,a){e.exports=a.p+"static/media/dax.3ae1a4a7.jpg"},117:function(e,t,a){e.exports=a.p+"static/media/pop.1b43a648.jpg"},129:function(e,t,a){e.exports=a(208)},134:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t){},179:function(e,t){},180:function(e,t){},181:function(e,t,a){},182:function(e,t,a){},183:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),c=a(55),o=a.n(c),l=a(21),s={REGION:"us-west-2",BUCKET:"gameboard-uploads"},i={REGION:"us-west-2",URL:"https://k6r2pgn41j.execute-api.us-west-2.amazonaws.com/prod"},u={REGION:"us-west-2",USER_POOL_ID:"us-west-2_55lKkN867",APP_CLIENT_ID:"1jtkpri800074n0e9amfsekbja",IDENTITY_POOL_ID:"us-west-2:d02cca9d-cd85-4f92-87bb-4e0ca6b75fdc"},m=(a(134),a(6)),d=a.n(m),p=a(12),f=a(5),g=a(75);a(136);var b=function(e){return r.a.createElement("div",{className:e.mode},r.a.createElement("div",{id:"mode-container"},r.a.createElement("label",null,"Dark Mode"),r.a.createElement("div",null,r.a.createElement("label",{className:"switch"},r.a.createElement("input",{onClick:e.toggleMode,type:"checkbox",checked:e.check,readOnly:!0}),r.a.createElement("span",{className:"slider round"})))))};a(137),a(138),a(139);var v=function(e){var t=Object(n.useState)(void 0),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(void 0),s=Object(f.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(e.mode),d=Object(f.a)(m,2),p=d[0],g=d[1];return Object(n.useEffect)((function(){g(e.mode)}),[e.mode]),r.a.createElement("div",{className:p},r.a.createElement("div",{className:"login-page"},r.a.createElement("link",{rel:"stylesheet",type:"text/css",href:"./styles/lightmode.css"}),r.a.createElement("div",{className:"ribbon ribbon-"+p},r.a.createElement("div",{className:"title title-"+p},r.a.createElement("h1",{className:"h1-"+p},r.a.createElement("span",null,"Battlemap Arena")),r.a.createElement("p",null,"Virtual Tabletop Toolset")),r.a.createElement("div",{className:"login-form"},r.a.createElement("form",{onSubmit:function(t){e.handleSubmit(c,i),t.preventDefault()}},r.a.createElement("div",{className:"login-form-content"},r.a.createElement("div",null,r.a.createElement("input",{autoFocus:!0,autoComplete:"off",type:"email",placeholder:"Email",onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Password",onChange:function(e){return u(e.target.value)},type:"password"})),r.a.createElement("div",null,r.a.createElement("button",{className:"login-button lightMode",disabled:!function(){if(c&&i)return c.length>0&&i.length>0}(),type:"submit",tabIndex:"3"},r.a.createElement("span",null,"Login"))))),r.a.createElement("div",{className:"links"},r.a.createElement("span",null,"Don't have an account?"),r.a.createElement("button",{onClick:e.signUp,tabIndex:"1"},"Sign up here"),r.a.createElement("span",null,"or"),r.a.createElement("button",{onClick:e.runTest,tabIndex:"2"},"Try without signing up"))))),r.a.createElement("div",{id:"login-toggle",className:e.mode},r.a.createElement(b,{check:"dark-mode"===e.mode,toggleMode:e.toggleMode,mode:e.mode})))};a(140),a(141),a(142);function h(e){var t=Object(n.useState)(null),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(f.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(null),b=Object(f.a)(m,2),v=b[0],h=b[1],k=Object(n.useState)(null),E=Object(f.a)(k,2),y=E[0],O=E[1],w=Object(n.useState)(null),j=Object(f.a)(w,2),x=j[0],S=j[1];function N(e){return C.apply(this,arguments)}function C(){return(C=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),v===y){e.next=4;break}return alert("Passwords do not match"),e.abrupt("return");case 4:return e.prev=4,e.next=7,g.a.signUp({username:i,password:v});case 7:a=e.sent,o(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),alert(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}function I(e){return T.apply(this,arguments)}function T(){return(T=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,g.a.confirmSignUp(i,x);case 4:return t.next=6,g.a.signIn(i,v);case 6:e.confirmSignUp(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}return r.a.createElement("div",{className:e.mode},null===c?r.a.createElement("div",{className:"signup-page"},r.a.createElement("div",{className:"ribbon"},r.a.createElement("div",{className:"signup-card"},r.a.createElement("form",{onSubmit:N,className:"signup-form"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{autoFocus:!0,type:"email",onChange:function(e){return u(e.target.value)}}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",onChange:function(e){return h(e.target.value)}}),r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{type:"password",onChange:function(e){return O(e.target.value)}}),r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:e.confirmSignUp},"Back"),r.a.createElement("span",null," "),r.a.createElement("button",{type:"submit"},"Submit")))))):r.a.createElement("div",{className:"signup-page"},r.a.createElement("div",{className:"ribbon confirmation"},r.a.createElement("form",{onSubmit:I},r.a.createElement("label",null,"Confirmation Code "),r.a.createElement("input",{autoFocus:!0,type:"tel",onChange:function(e){return S(e.target.value)}}),r.a.createElement("button",null,"Submit"),r.a.createElement("h1",null,"Please check your email for the code.")))))}var k=function(e){var t=Object(n.useState)(null),a=Object(f.a)(t,2),c=a[0],o=a[1];function l(){return(l=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.currentSession();case 3:return u(),e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function s(e,t){return i.apply(this,arguments)}function i(){return(i=Object(p.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.signIn(t,a);case 3:return u(),e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),alert("Login error:"+e.t0.message),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function u(){o(null),e.setLoggedIn(!0)}function m(){o(null),e.setIsTest(!0)}function b(){k()}function k(){(function(){return l.apply(this,arguments)})()&&o(r.a.createElement(v,{mode:e.mode,toggleMode:e.toggleMode,runTest:m,authenticateLogin:u,signUp:E,confirmSignUp:b,handleSubmit:s}))}function E(){o(r.a.createElement(h,{mode:e.mode,confirmSignUp:b}))}return Object(n.useEffect)((function(){k()}),[e.mode]),r.a.createElement("div",null,c)},E=a(30),y=a(108),O=a(19),w=a(109),j=a(64);a(163),a(164);var x=function(e){return r.a.createElement("div",{className:e.mode},r.a.createElement("div",{className:"tray"},r.a.createElement("div",{className:"edit-icon",onClick:e.toggleTokens},r.a.createElement(y.a,null)),r.a.createElement("div",{className:"edit-icon",onClick:e.toggleMaps},r.a.createElement(O.d,null)),r.a.createElement("div",{className:"edit-icon",onClick:e.close},r.a.createElement(j.b,null)),r.a.createElement("div",{className:"edit-icon",onClick:e.toggleOptions},r.a.createElement(w.a,null))))};var S=function(e){var t,a;return r.a.createElement("div",{id:e.id,draggable:"true",onDragStart:function(e){e.dataTransfer.setData("transfer",e.target.src)},onTouchStart:function(e){console.log("Grabbed",e)},onTouchEnd:function(n){var r={src:null,x:null,y:null};r.src=n.target.src,r.x=t,r.y=a,e.dragHandler(r)},onTouchMove:function(e){console.log("Dragging"),t=e.touches[0].clientX,a=e.touches[0].clientY},onDragOver:function(e){e.stopPropagation()}},e.children)},N=a(110),C=a(111),I=a(119),T=a(118),D=function(e){Object(I.a)(a,e);var t=Object(T.a)(a);function a(){return Object(N.a)(this,a),t.apply(this,arguments)}return Object(C.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,onDrop:this.props.drop,onDragOver:this.props.allowDrop},this.props.children)}}]),a}(r.a.Component);a(165),a(166);var M=function(e){var t=Object(n.useState)(null),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),s=Object(f.a)(l,2),i=s[0],u=s[1];function m(e){o(parseInt(e.target.id[0]))}function d(e){o(null)}Object(n.useEffect)((function(){u(e.tokens)}),[e.tokens]);var p="token-drawer";return p="drawerDocked"===e.state?"token-drawer docked":"token-drawer",r.a.createElement("div",{className:e.mode},r.a.createElement("div",{className:p},r.a.createElement("div",{className:"searchbar"},r.a.createElement("input",{type:"text",placeholder:"Search..",onChange:function(t){if(""!==t.target.value){for(var a=i.length,n=[],r=0;r<a;++r)i[r].name.toLowerCase().includes(t.target.value.toLowerCase())&&n.push(i[r]);u(n),console.log(n)}else u(e.tokens)}})),r.a.createElement("div",{className:"token-container"},r.a.createElement("div",{className:"upload-form-token"},r.a.createElement("form",{action:"/action_page.php",className:"token-form"},r.a.createElement("label",{htmlFor:"token-input"},r.a.createElement("div",{className:"add-icon-token"},r.a.createElement(O.a,null))),r.a.createElement("input",{id:"token-input",type:"file",onChange:e.getToken}))),i[0]?i.map((function(t,a){return r.a.createElement("div",{className:"token-img",key:t+a},r.a.createElement(D,{id:a+"droppable"},r.a.createElement(S,{id:a+"token",dragHandler:e.dragHandler},r.a.createElement("div",{className:"token-thumbnails"},c===a?r.a.createElement("img",{className:"show-options token",alt:"...",id:a+"token",draggable:"true",src:t.img.src,onDoubleClick:m,onClick:d}):r.a.createElement("img",{className:"token",alt:"...",id:a+"token",draggable:"true",src:t.img.src,onDoubleClick:m,onClick:d}),r.a.createElement("div",{className:"token-options"},r.a.createElement("div",{className:"delete-token option-btn",onClick:function(){return e.deleteToken(t.key)}},r.a.createElement(O.c,null)),r.a.createElement("div",{className:"info-token option-btn",onClick:function(){return e.tokenInformation(t.key)}},r.a.createElement(O.b,null)))))))})):r.a.createElement("p",null,"Add a token. Drag and drop the token onto the grid. Scale token to grid by double clicking the token."))))};a(167),a(168);var P=function(e){var t=Object(n.useState)(null),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)("selected"),s=Object(f.a)(l,2),i=s[0],u=s[1];function m(t){o(parseInt(t.target.id[0])),e.changeMap(t),u("selected")}function d(e){o(parseInt(e.target.id[0])),u("selected show-options"===i?"selected":"selected show-options")}var p="map-drawer";return p="drawerOpen"===e.state?"map-drawer open":"map-drawer",r.a.createElement("div",{className:e.mode},r.a.createElement("div",{className:p},r.a.createElement("div",{className:"map-container"},r.a.createElement("div",{className:"upload-form"},r.a.createElement("form",{action:"/action_page.php",className:"map-form"},r.a.createElement("label",{htmlFor:"map-file-input"},r.a.createElement("div",{className:"add-icon"},r.a.createElement(O.a,null))),r.a.createElement("input",{id:"map-file-input",type:"file",onChange:e.getMap}))),e.maps[0]?e.maps.map((function(t,a){return r.a.createElement("div",{className:"map-thumbnails"},c===a?r.a.createElement("img",{className:i.concat(" ","map"),src:t.img.src,alt:"...",id:a+"m",onClick:m,onDoubleClick:d}):r.a.createElement("img",{className:"map",src:t.img.src,alt:"...",id:a+"map",onClick:m,onDoubleClick:d}),r.a.createElement("div",{className:"delete-map option-btn",onClick:function(){return function(t){for(var a=e.maps,n=[],r=0;r<a.length;r++)a[r].key!==t&&(n.push(a[r]),console.log(a[r].key,t));e.deleteMap(n,t)}(t.key)}},r.a.createElement(O.c,null)))})):r.a.createElement("p",null,"Add a map. Switch maps by clicking on the thumbnails."))))},K=a(65),L=a.n(K),Y=a(112),R=a(66);a(175);var U=function(e){var t=Object(n.useState)(!1),a=Object(f.a)(t,2),c=a[0],o=a[1];return r.a.createElement("div",{className:"menu-bar"},r.a.createElement("div",{className:"menu-bar",onClick:function(){e.toggleLock(e.type),o(!c)}},c?r.a.createElement(R.a,{style:{color:"#2196f3"}}):r.a.createElement(R.b,null)),r.a.createElement("div",{className:"menu-bar"},r.a.createElement(Y.a,null)),r.a.createElement("div",{className:"close-options menu-bar"},r.a.createElement(j.a,{onClick:function(){c||("options"===e.type&&e.toggleOptions(),"tokenInfo"===e.type&&e.setSelectedToken(!1))}})))};a(176),a(177);var _=function(e){return Object(n.useEffect)((function(){e.state?document.getElementById("optionTray").style.display="block":document.getElementById("optionTray").style.display="none"}),[e.state]),r.a.createElement("div",{className:e.mode,id:"optionTray"},r.a.createElement(L.a,{handle:".handle"},r.a.createElement("div",{className:"options"},r.a.createElement("div",{className:"handle"},r.a.createElement(U,{toggleLock:e.toggleLock,toggleOptions:e.toggleOptions,type:"options"})),r.a.createElement("div",null,"Grid Size"),r.a.createElement("div",null,r.a.createElement("input",{type:"range",min:"10",max:"100",className:"slider",onInput:e.scaleGrid.bind(this)})),r.a.createElement("div",null,"Map Size"),r.a.createElement("div",null,r.a.createElement("input",{type:"range",min:"10",max:"100",className:"slider",onInput:e.scaleMap.bind(this)})),r.a.createElement("div",null,r.a.createElement(b,{check:"dark-mode"===e.mode,toggleMode:e.toggleMode,mode:e.mode})),r.a.createElement("div",null,r.a.createElement("div",{className:"logout-button",onClick:e.handleLogout.bind(this)},r.a.createElement("span",null,"Log Out"))))))},A=a(29),B=a(74);a(181);var X=function(e){var t=Object(n.useState)(null),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(f.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(null),d=Object(f.a)(m,2),p=d[0],g=d[1],b=Object(n.useState)(null),v=Object(f.a)(b,2),h=v[0],k=v[1];function E(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=document.body.clientWidth,c=document.body.clientHeight,o=e.getObjects("line");for(var l in o)e.remove(o[l]);for(var s=Math.floor(c/t)+3,i=Math.floor(r/t)+3,u=-1*t,m=0;m<s;m++)e.add(new A.fabric.Line([u+a,m*t+u+n,r-u+a,m*t+u+n],{stroke:"grey",selectable:!1}));for(var d=0;d<i;d++)e.add(new A.fabric.Line([d*t+u+a,u+n,d*t+u+a,c-u+n],{stroke:"grey",selectable:!1}))}function y(t){if(t){var a=e.mapScale,n=document.body.clientWidth,r=document.body.clientHeight;if(t){var o=n/2-t.width/2*a,l=r/2-t.height/2*a;A.fabric.Image.fromURL(t.src,(function(e){var t=e.set({left:o,top:l,selectable:!1}).scale(a);c.setBackgroundImage(t),c.renderAll()}))}}}function O(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.off(),t.on("object:moving",(function(e){0===n&&0===r?(e.target.left=Math.round(e.target.left/a)*a,e.target.top=Math.round(e.target.top/a)*a):(e.target.left=Math.round(e.target.left/a)*a+n%a,e.target.top=Math.round(e.target.top/a)*a+r%a),e.target.setCoords()})),t.on("mouse:down",(function(e){if(!t.getActiveObject()){var a=e.e;if(!0===a.altKey&&(this.isDragging=!0,this.selection=!1,this.lastPosX=a.clientX,this.lastPosY=a.clientY),3===e.button){var n=e.e;this.isDragging=!0,this.selection=!1,this.lastPosX=n.clientX,this.lastPosY=n.clientY}}})),t.on("mouse:move",(function(t){if(this.isDragging){var a=t.e;if(!0===a.altKey){var n=a.clientX-this.lastPosX,r=a.clientY-this.lastPosY;return n>=20&&(n=20),n<=-20&&(n=-20),r>=20&&(r=20),r<=-20&&(r=-20),console.log(n+" "+r),O(this,e.gridScale,n,r),void E(this,e.gridScale,n,r)}var c=this.viewportTransform;c[4]+=a.clientX-this.lastPosX,c[5]+=a.clientY-this.lastPosY,this.requestRenderAll(),this.lastPosX=a.clientX,this.lastPosY=a.clientY}})),t.on("mouse:up",(function(e){this.isDragging&&(this.setViewportTransform(this.viewportTransform),this.isDragging=!1,this.selection=!0,document.getElementById("center").style.display="block")})),t.on("mouse:wheel",(function(e){var a=e.e.deltaY,n=t.getZoom();(n*=Math.pow(.999,a))>20&&(n=20),n<.5&&(n=.5),t.zoomToPoint({x:e.e.offsetX,y:e.e.offsetY},n),e.e.preventDefault(),e.e.stopPropagation(),document.getElementById("center").style.display="block"}))}function w(){var e=document.createElement("img");return e.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E",function(t,a,n,r,c){var o=this.cornerSize;t.save(),t.translate(a,n),t.rotate(A.fabric.util.degreesToRadians(c.angle)),t.drawImage(e,-o/2,-o/2,o,o),t.restore()}}function j(e,t){var a=t.canvas;a.remove(t),a.requestRenderAll()}return Object(n.useEffect)((function(){!function(){if(c)"dark-mode"===e.mode?(c.backgroundColor="#525959",c.renderAll()):(c.backgroundColor="white",c.renderAll()),e.gridScale!==h&&(O(c,e.gridScale),E(c,e.gridScale),k(e.gridScale)),e.currentMap!==i|e.mapScale!==p&&(y(e.currentMap),u(e.currentMap),g(e.mapScale));else{var t=new A.fabric.Canvas("canvas",{selection:!1,fireRightClick:!0});"dark-mode"===e.mode&&(t.backgroundColor="#525959"),o(t),O(t,e.gridScale),E(t,e.gridScale),y(e.currentMap),A.fabric.Object.prototype.controls.deleteControl=new A.fabric.Control({x:.5,y:-.5,offsetY:-16,offsetX:16,cursorStyle:"pointer",mouseUpHandler:j,render:w(),cornerSize:24}),k(e.gridScale),g(e.mapScale),u(e.currentMap)}}(),window.addEventListener("contextmenu",(function(e){e.preventDefault()}),!1)}),[e.currentMap,e.gridScale,e.mapScale,e.mode]),r.a.createElement(D,{drop:function(t){t.preventDefault();var a=t.dataTransfer.getData("transfer"),n=new Image;n.src=a,function(t,a,n){A.fabric.Image.fromURL(t.src,(function(t){var r=t.set({left:a,top:n});r.scaleToWidth(e.gridScale),r.scaleToHeight(e.gridScale),c.add(r)}))}(n,t.clientX,t.clientY)},allowDrop:function(e){e.preventDefault()}},r.a.createElement("div",{id:"center",onClick:function(){var e=c.getZoom(),t=document.body.clientWidth,a=document.body.clientHeight/2-c.getHeight()/2*e,n=t/2-c.getWidth()/2*e;c.viewportTransform[4]=n,c.viewportTransform[5]=a,c.requestRenderAll(),c.lastPosX=a,c.lastPosY=n,document.getElementById("center").style.display="none"}},r.a.createElement(B.a,null)),r.a.createElement("canvas",{id:"canvas",width:document.body.clientWidth,height:document.body.clientHeight}))};a(182),a(183);var G=function(e){var t=Object(n.useState)("none"),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(f.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(""),d=Object(f.a)(m,2),p=d[0],g=d[1],b=Object(n.useState)(""),v=Object(f.a)(b,2),h=v[0],k=v[1];function E(e){"hpMax"===e.target.id?g(e.target.value):k(e.target.value)}return Object(n.useEffect)((function(){e.selected?(o("display"),u(e.selected.name),g(e.selected.hp.max),k(e.selected.hp.min)):o("none")}),[e.selected]),r.a.createElement("div",{className:e.mode+" "+c},r.a.createElement(L.a,{handle:".handle"},r.a.createElement("div",{className:"token-information"},r.a.createElement("div",{className:"handle"},r.a.createElement(U,{setSelectedToken:e.setSelectedToken,toggleLock:e.toggleLock,type:"tokenInfo"})),r.a.createElement("div",null,r.a.createElement("input",{className:"name-label",type:"text",placeholder:"Name",value:i,onChange:function(e){u(e.target.value)}})),r.a.createElement("div",{className:"binary-tracker"},r.a.createElement("div",null,r.a.createElement("input",{type:"number",id:"hpMin",value:h,onChange:E})),r.a.createElement("span",null,"/"),r.a.createElement("div",null,r.a.createElement("input",{type:"number",id:"hpMax",value:p,onChange:E}))),r.a.createElement("div",null,r.a.createElement("button",{className:"info-button",onClick:function(){var t=e.selected;t.name=i,t.hp={max:p,min:h},e.updateTokenInfo(t)}},"Save")))))},H=a(215);function F(){return(F=Object(p.a)(d.a.mark((function e(t,a,n){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(Date.now()).concat(n),e.next=3,H.a.vault.put(r,t,{contentType:a});case 3:return c=e.sent,e.abrupt("return",c.key);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=function(e,t,a){return F.apply(this,arguments)};function z(){return(z=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.a.vault.get(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=function(e){return z.apply(this,arguments)},q=a(216);function J(e){return q.a.post("gameboard","/gameboard",{body:e})}function Z(){return $.apply(this,arguments)}function $(){return($=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q.a.get("gameboard","/gameboard"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t){return q.a.put("gameboard","/gameboard/".concat(t),{body:e})}function ee(e,t,a){return te.apply(this,arguments)}function te(){return(te=Object(p.a)(d.a.mark((function e(t,a,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={db:null,s3:null},e.next=3,Q(a,t);case 3:return r.db=e.sent,e.next=6,H.a.vault.remove(n);case 6:return r.s3=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ae=a(116),ne=a.n(ae),re=a(117),ce=a.n(re);var oe=function(e){var t=Object(n.useState)(null),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)({gameId:null,mapKeys:[],tokenKeys:[]}),s=Object(f.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)("drawerClosed"),g=Object(f.a)(m,2),b=g[0],v=g[1],h=Object(n.useState)("drawerClosed"),k=Object(f.a)(h,2),y=k[0],O=k[1],w=Object(n.useState)(!1),j=Object(f.a)(w,2),S=j[0],N=j[1],C=Object(n.useState)([]),I=Object(f.a)(C,2),T=I[0],D=(I[1],Object(n.useState)([])),K=Object(f.a)(D,2),L=K[0],Y=K[1],R=Object(n.useState)([]),U=Object(f.a)(R,2),A=U[0],B=U[1],H=Object(n.useState)(null),F=Object(f.a)(H,2),z=F[0],q=F[1],$=Object(n.useState)(1),te=Object(f.a)($,2),ae=te[0],re=te[1],oe=Object(n.useState)(50),le=Object(f.a)(oe,2),se=le[0],ie=le[1],ue=Object(n.useState)(!1),me=Object(f.a)(ue,2),de=me[0],pe=me[1],fe=Object(n.useState)(null),ge=Object(f.a)(fe,2),be=ge[0],ve=ge[1];function he(e,t){return{content:{maps:e,tokens:t}}}function ke(){return(ke=Object(p.a)(d.a.mark((function t(){var a,n,r,c,l,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isTest){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,Z();case 5:if(!(a=t.sent)[0]){t.next=27;break}o(a),(n=i).gameId=a[0].gameid,n.mapKeys=a[0].content.maps,n.tokenKeys=a[0].content.tokens,u(n),r=d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(i.mapKeys[t]);case 2:a=e.sent,(n=new Image).src=a,r={img:n,key:i.mapKeys[t]},Y((function(e){return[].concat(Object(E.a)(e),[r])}));case 7:case"end":return e.stop()}}),e)})),c=0;case 15:if(!(c<i.mapKeys.length)){t.next=20;break}return t.delegateYield(r(c),"t0",17);case 17:++c,t.next=15;break;case 20:l=d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(i.tokenKeys[t]);case 2:a=e.sent,(n=new Image).src=a,r={img:n,key:i.tokenKeys[t]},B((function(e){return[].concat(Object(E.a)(e),[r])}));case 7:case"end":return e.stop()}}),e)})),s=0;case 22:if(!(s<i.tokenKeys.length)){t.next=27;break}return t.delegateYield(l(s),"t1",24);case 24:++s,t.next=22;break;case 27:t.next=32;break;case 29:t.prev=29,t.t2=t.catch(2),console.log(t.t2);case 32:case"end":return t.stop()}}),t,null,[[2,29]])})))).apply(this,arguments)}function Ee(){return(Ee=Object(p.a)(d.a.mark((function t(a,n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isTest){t.next=3;break}return Y(a),t.abrupt("return");case 3:return t.prev=3,(r=i.mapKeys.indexOf(n+"map"))>-1&&(i.mapKeys.splice(r,1),a.splice(r,1),Y(a)),c=he(i.mapKeys,i.tokenKeys),t.next=9,ee(i.gameId,c,n);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})))).apply(this,arguments)}function ye(){return(ye=Object(p.a)(d.a.mark((function t(a){var n,r,c,o,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isTest){t.next=5;break}for(n=[],r=0;r<A.length;r++)A[r].key!==a&&n.push(A[r]);return B(n),t.abrupt("return");case 5:return t.prev=5,(c=i.tokenKeys.indexOf(a))>-1&&(i.tokenKeys.splice(c,1),(o=Object(E.a)(A)).splice(c,1),B(o)),l=he(i.mapKeys,i.tokenKeys),t.next=11,ee(i.gameId,l,a);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),alert(t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})))).apply(this,arguments)}function Oe(){N(!S)}function we(e){var t=T.indexOf(e);-1!==t?T.splice(t,1):T.push(e)}function je(){"drawerOpen"===y&&xe(),v("drawerClosed"===b?"drawerDocked":"drawerClosed")}function xe(){"drawerDocked"===b&&je(),O("drawerClosed"===y?"drawerOpen":"drawerClosed")}function Se(){return(Se=Object(p.a)(d.a.mark((function t(a){var n,r,o,l,s,u,m;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new FileReader,r=a.target.files,Ce(o=r[0])){t.next=5;break}return t.abrupt("return");case 5:if(!(L.length>4)){t.next=8;break}return alert("You cannot have more than 5 maps uploaded during this stage of development."),t.abrupt("return");case 8:if(c||e.isTest){t.next=25;break}return t.prev=9,t.next=12,W(o,o.type,"map");case 12:return l=t.sent,t.next=15,J(he(i.mapKeys,i.tokenKeys));case 15:s=t.sent,i.gameId=s.gameid,i.mapKeys=[l],t.next=23;break;case 20:t.prev=20,t.t0=t.catch(9),alert(t.t0);case 23:t.next=39;break;case 25:if(e.isTest){t.next=39;break}return t.prev=26,t.next=29,W(o,o.type,"map");case 29:return l=t.sent,u=i.mapKeys,i.mapKeys=[].concat(Object(E.a)(u),[l]),t.next=34,Q(he(i.mapKeys,i.tokenKeys),i.gameId);case 34:t.next=39;break;case 36:t.prev=36,t.t1=t.catch(26),alert(t.t1);case 39:void 0===l&&(m=new Date,l=m.getTime()),n.onload=function(){var e=new Image;e.src=n.result;var t={img:e,key:l};Y((function(e){return[].concat(Object(E.a)(e),[t])}))},n.readAsDataURL(o);case 42:case"end":return t.stop()}}),t,null,[[9,20],[26,36]])})))).apply(this,arguments)}function Ne(){return(Ne=Object(p.a)(d.a.mark((function t(a){var n,r,o,l,s,u,m;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.target.files,r=new FileReader,Ie(o=n[0])){t.next=5;break}return t.abrupt("return");case 5:if(!(A.length>9)){t.next=8;break}return alert("You cannot have more than 10 tokens uploaded during this stage of development."),t.abrupt("return");case 8:if(c||e.isTest){t.next=25;break}return t.prev=9,t.next=12,W(o,o.type,"token");case 12:return l=t.sent,t.next=15,J(he(i.mapKeys,i.tokenKeys));case 15:s=t.sent,i.gameId=s.gameid,i.tokenKeys=[l],t.next=23;break;case 20:t.prev=20,t.t0=t.catch(9),alert(t.t0);case 23:t.next=39;break;case 25:if(e.isTest){t.next=39;break}return t.prev=26,t.next=29,W(o,o.type,"token");case 29:return l=t.sent,u=i.tokenKeys,i.tokenKeys=[].concat(Object(E.a)(u),[l]),t.next=34,Q(he(i.mapKeys,i.tokenKeys),i.gameId);case 34:t.next=39;break;case 36:t.prev=36,t.t1=t.catch(26),alert(t.t1);case 39:void 0===l&&(m=new Date,l=m.getTime()),r.onload=function(){var e=new Image;e.src=r.result;var t={img:e,key:l,name:"",hp:{max:0,min:0}};B((function(e){return[].concat(Object(E.a)(e),[t])}))},r.readAsDataURL(o);case 42:case"end":return t.stop()}}),t,null,[[9,20],[26,36]])})))).apply(this,arguments)}function Ce(e){return e&&e.size>2e6?(alert("Please pick a file smaller than ".concat(2," MB.")),0):1}function Ie(e){return e&&e.size>2e5?(alert("Please pick a file smaller than ".concat(25," kb.")),0):1}return Object(n.useEffect)((function(){e.isTest&&function(){var e=[],t=[],a=[];e.src=ne.a,t.src=ce.a;var n={img:e,key:"testToken1",name:"Dax",hp:{max:0,min:0}},r={img:t,key:"testToken2",name:"Pop",hp:{max:0,min:0}};a.push(n),a.push(r),B(a)}(),function(){ke.apply(this,arguments)}()}),[]),r.a.createElement("div",null,r.a.createElement(X,{mode:e.mode,gridScale:se,currentMap:z,mapScale:ae,toDrop:be,setToDrop:ve}),r.a.createElement(_,{mode:e.mode,scaleGrid:function(e){var t=parseInt(e.target.value);ie(t)},scaleMap:function(e){var t=e.target.value/50;re(t)},toggleMode:e.toggleMode,handleLogout:e.handleLogout,state:S,toggleOptions:Oe,toggleLock:we}),r.a.createElement(x,{mode:e.mode,toggleTokens:je,toggleMaps:xe,toggleOptions:Oe,close:function(){T.includes("options")||N(!1),T.includes("tokenInfo")||pe(!1),v("drawerClosed"),O("drawerClosed")}}),r.a.createElement(M,{mode:e.mode,state:b,getToken:function(e){return Ne.apply(this,arguments)},tokens:A,deleteToken:function(e){return ye.apply(this,arguments)},tokenInformation:function(e){for(var t=A.length,a=-1,n=0;n<t;++n)A[n].key===e&&(a=n);-1!==a&&(A[a].key===de.key?pe(!1):pe(A[a]))},dragHandler:function(e){ve(e)}}),r.a.createElement(P,{mode:e.mode,state:y,getMap:function(e){return Se.apply(this,arguments)},maps:L,changeMap:function(e){var t=L[e.target.id[0]];q(t.img)},deleteMap:function(e,t){return Ee.apply(this,arguments)}}),r.a.createElement(G,{mode:e.mode,selected:de,updateTokenInfo:function(e){for(var t=Object(E.a)(A),a=t.length,n=0;n<a;++n)t[n].key===e.key&&(t[n]=e);B(t)},toggleLock:we,setSelectedToken:pe}))};a(207);var le=function(e){var t=Object(n.useState)(function(){var e=localStorage.getItem("mode");return null===e?"light-mode":e}()),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(f.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(!1),b=Object(f.a)(m,2),v=b[0],h=b[1];function E(){"light-mode"===c?(o("dark-mode"),localStorage.setItem("mode","dark-mode")):(o("light-mode"),localStorage.setItem("mode","light-mode"))}function y(){return(y=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.signOut();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:h(!1),u(!1);case 10:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){}),[]),r.a.createElement("div",{className:"App"},i||v?r.a.createElement(oe,{mode:c,isTest:v,toggleMode:E,handleLogout:function(){return y.apply(this,arguments)}}):r.a.createElement(k,{mode:c,toggleMode:E,setIsTest:h,setLoggedIn:u}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.configure({Auth:{mandatorySignIn:!0,region:u.REGION,userPoolId:u.USER_POOL_ID,identityPoolId:u.IDENTITY_POOL_ID,userPoolWebClientId:u.APP_CLIENT_ID},Storage:{region:s.REGION,bucket:s.BUCKET,identityPoolId:u.IDENTITY_POOL_ID},API:{endpoints:[{name:"gameboard",endpoint:i.URL,region:i.REGION}]}}),(0,o.a.hydrate)(r.a.createElement(r.a.StrictMode,null,r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[129,1,2]]]);
//# sourceMappingURL=main.a9b69fb1.chunk.js.map