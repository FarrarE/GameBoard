(this.webpackJsonpgameboard=this.webpackJsonpgameboard||[]).push([[0],{116:function(e,t,a){e.exports=a.p+"static/media/dax.3ae1a4a7.jpg"},117:function(e,t,a){e.exports=a.p+"static/media/pop.1b43a648.jpg"},127:function(e,t,a){e.exports=a(205)},132:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},175:function(e,t){},176:function(e,t){},177:function(e,t){},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),c=a(56),o=a.n(c),l=a(20),s={REGION:"us-west-2",BUCKET:"gameboard-uploads"},i={REGION:"us-west-2",URL:"https://k6r2pgn41j.execute-api.us-west-2.amazonaws.com/prod"},u={REGION:"us-west-2",USER_POOL_ID:"us-west-2_55lKkN867",APP_CLIENT_ID:"1jtkpri800074n0e9amfsekbja",IDENTITY_POOL_ID:"us-west-2:d02cca9d-cd85-4f92-87bb-4e0ca6b75fdc"},m=(a(132),a(6)),d=a.n(m),p=a(23),f=a(12),g=a(5),b=a(109),h=a(21),v=a(111),k=a(110);a(134),a(135);var E=function(e){return r.a.createElement("div",{className:e.mode},r.a.createElement("div",{className:"tray"},r.a.createElement("div",{className:"edit-icon"},r.a.createElement(b.a,{onClick:e.toggleTokens})),r.a.createElement("div",{className:"edit-icon"},r.a.createElement(h.d,{onClick:e.toggleMaps})),r.a.createElement("div",{className:"edit-icon"},r.a.createElement(k.a,{onClick:e.close})),r.a.createElement("div",{className:"edit-icon"},r.a.createElement(v.a,{onClick:e.toggleOptions}))))},y=a(58),w=a(59),O=a(72),x=a(71),j=function(e){Object(O.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).drag=function(e){e.dataTransfer.setData("transfer",e.target.src)},e.noAllowDrop=function(e){e.stopPropagation()},e}return Object(w.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,draggable:"true",onDragStart:this.drag,onDragOver:this.noAllowDrop},this.props.children)}}]),a}(r.a.Component),S=function(e){Object(O.a)(a,e);var t=Object(x.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(w.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,onDrop:this.props.drop,onDragOver:this.props.allowDrop},this.props.children)}}]),a}(r.a.Component);a(136),a(137);var C=function(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)("show-options"),s=Object(g.a)(l,2),i=s[0],u=(s[1],Object(n.useState)([])),m=Object(g.a)(u,2),d=m[0],p=m[1];function f(e){o(parseInt(e.target.id[0]))}function b(e){o(null)}Object(n.useEffect)((function(){p(e.tokens)}),[e.tokens]);var v="token-drawer";return v="drawerDocked"===e.state?"token-drawer docked":"token-drawer",r.a.createElement("div",{className:e.mode},r.a.createElement("div",{className:v},r.a.createElement("div",{className:"searchbar"},r.a.createElement("input",{type:"text",placeholder:"Search..",onChange:function(t){if(""!==t.target.value){for(var a=d.length,n=[],r=0;r<a;++r)d[r].name.toLowerCase().includes(t.target.value.toLowerCase())&&n.push(d[r]);p(n),console.log(n)}else p(e.tokens)}})),r.a.createElement("div",{className:"token-container"},r.a.createElement("div",{className:"upload-form-token"},r.a.createElement("form",{action:"/action_page.php",className:"token-form"},r.a.createElement("label",{for:"token-input"},r.a.createElement("div",{className:"add-icon-token"},r.a.createElement(h.a,null))),r.a.createElement("input",{id:"token-input",type:"file",onChange:e.getToken}))),d[0]?d.map((function(t,a){return r.a.createElement("div",{className:"token-img"},r.a.createElement(S,{id:a+"droppable"},r.a.createElement(j,{id:a+"token"},r.a.createElement("div",{className:"token-thumbnails"},c===a?r.a.createElement("img",{className:i+" token",alt:"...",id:a+"token",draggable:"true",src:t.img.src,onDoubleClick:f,onClick:b}):r.a.createElement("img",{className:"token",alt:"...",id:a+"token",draggable:"true",src:t.img.src,onDoubleClick:f,onClick:b}),r.a.createElement("div",{className:"token-options"},r.a.createElement("div",{className:"delete-token option-btn",onClick:function(){return e.deleteToken(t.key)}},r.a.createElement(h.c,null)),r.a.createElement("div",{className:"info-token option-btn",onClick:function(){return e.tokenInformation(t.key)}},r.a.createElement(h.b,null)))))))})):r.a.createElement("p",null,"Add a token. Drag and drop the token onto the grid. Scale token to grid by double clicking the token."))))},N=(a(138),a(139),"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E");var I=function(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)("selected"),s=Object(g.a)(l,2),i=s[0],u=s[1];function m(t){o(parseInt(t.target.id[0])),e.changeMap(t),"selected show-options"===i&&u("selected")}function d(e){o(parseInt(e.target.id[0])),u("selected show-options"===i?"selected":"selected show-options")}var p="map-drawer";return p="drawerOpen"===e.state?"map-drawer open":"map-drawer",r.a.createElement("div",{className:e.mode},r.a.createElement("div",{className:p},r.a.createElement("div",{className:"map-container"},r.a.createElement("div",{className:"upload-form"},r.a.createElement("form",{action:"/action_page.php",className:"map-form"},r.a.createElement("label",{for:"map-file-input"},r.a.createElement("div",{className:"add-icon"},r.a.createElement(h.a,null))),r.a.createElement("input",{id:"map-file-input",type:"file",onChange:e.getMap}))),e.maps[0]?e.maps.map((function(t,a){return r.a.createElement("div",{className:"map-thumbnails"},c===a?r.a.createElement("img",{className:i+" map",src:t.img.src,alt:"...",id:a+"m",onClick:m,onDoubleClick:d}):r.a.createElement("img",{className:"map",src:t.img.src,alt:"...",id:a+"map",onClick:m,onDoubleClick:d}),r.a.createElement("img",{className:"delete-map",src:N,onClick:function(){return e.deleteMap(t.key)}}))})):r.a.createElement("p",null,"Add a map. Switch maps by clicking on the thumbnails."))))},D=a(60),T=a.n(D);a(146);var P=function(e){return r.a.createElement("div",{className:e.mode},r.a.createElement("div",{id:"mode-container"},r.a.createElement("label",null,"Dark Mode"),r.a.createElement("div",null,r.a.createElement("label",{class:"switch"},r.a.createElement("input",{onClick:e.toggleMode,type:"checkbox",checked:e.check}),r.a.createElement("span",{class:"slider round"})))))},K=a(37);a(147),a(148);var M=function(e){return r.a.createElement("div",{className:e.mode},r.a.createElement(T.a,{handle:".handle"},r.a.createElement("div",{className:"options"},r.a.createElement("div",null,r.a.createElement(K.a,{className:"drag-icon handle"})),r.a.createElement("div",null,"Grid Size"),r.a.createElement("div",null,r.a.createElement("input",{type:"range",min:"10",max:"100",class:"slider",onInput:e.scaleGrid.bind(this)})),r.a.createElement("div",null,"Map Size"),r.a.createElement("div",null,r.a.createElement("input",{type:"range",min:"10",max:"100",class:"slider",onInput:e.scaleMap.bind(this)})),r.a.createElement("div",null,r.a.createElement(P,{check:"dark-mode"===e.mode,toggleMode:e.toggleMode,mode:e.mode})),r.a.createElement("div",null,r.a.createElement("div",{className:"logout-button",onClick:e.handleLogout.bind(this)},r.a.createElement("span",null,"Log Out"))))))};a(149),a(150),a(151);var L=function(e){var t=Object(n.useState)(void 0),a=Object(g.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(void 0),s=Object(g.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(),d=Object(g.a)(m,2),p=d[0],f=d[1];return Object(n.useEffect)((function(){f(e.mode)}),[e.mode]),r.a.createElement("div",{className:p},r.a.createElement("div",{className:"login-page"},r.a.createElement("link",{rel:"stylesheet",type:"text/css",href:"./styles/lightmode.css"}),r.a.createElement("div",{className:"ribbon ribbon-"+p},r.a.createElement("div",{className:"title title-"+p},r.a.createElement("h1",{className:"h1-"+p},"Battlemaps"),r.a.createElement("p",null,"Virtual Tabletop Toolset")),r.a.createElement("div",{className:"login-form"},r.a.createElement("form",{onSubmit:function(t){e.handleSubmit(c,i),t.preventDefault()}},r.a.createElement("input",{autoFocus:!0,type:"email",value:c,placeholder:"Email",onChange:function(e){return o(e.target.value)}}),r.a.createElement("input",{value:i,placeholder:"Password",onChange:function(e){return u(e.target.value)},type:"password"}),r.a.createElement("div",null,r.a.createElement("button",{className:"login-button lightMode",disabled:!function(){if(c&&i)return c.length>0&&i.length>0}(),type:"submit",tabIndex:"3"},r.a.createElement("span",null,"Login")))),r.a.createElement("div",{className:"links"},r.a.createElement("span",null,"Dont have an account?"),r.a.createElement("a",{onClick:e.signUp,tabIndex:"1"},r.a.createElement("span",null," Sign up here")),r.a.createElement("span",null,"or"),r.a.createElement("a",{onClick:e.runTest,tabIndex:"2"},r.a.createElement("span",null,"Try without signing up")))))),r.a.createElement("div",{id:"login-toggle",className:e.mode},r.a.createElement(P,{check:"dark-mode"===e.mode,toggleMode:e.toggleMode,mode:e.mode})))},A=a(77);a(152),a(153),a(154);function Y(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(g.a)(l,2),i=(s[0],s[1]),u=Object(n.useState)(null),m=Object(g.a)(u,2),p=m[0],b=m[1],h=Object(n.useState)(null),v=Object(g.a)(h,2),k=v[0],E=v[1],y=Object(n.useState)(null),w=Object(g.a)(y,2),O=w[0],x=w[1],j=Object(n.useState)(null),S=Object(g.a)(j,2),C=S[0],N=S[1];function I(e){return D.apply(this,arguments)}function D(){return(D=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),k===O){e.next=4;break}return alert("Passwords do not match"),e.abrupt("return");case 4:return i(!0),e.prev=5,e.next=8,A.a.signUp({username:p,password:k});case 8:a=e.sent,i(!1),o(a),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),alert(e.t0.message),i(!1);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}function T(e){return P.apply(this,arguments)}function P(){return(P=Object(f.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),i(!0),t.prev=2,t.next=5,A.a.confirmSignUp(p,C);case 5:return t.next=7,A.a.signIn(p,k);case 7:e.confirmSignUp(),e.userHasAuthenticated(!0),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),alert(t.t0.message),i(!1);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))).apply(this,arguments)}return r.a.createElement("div",{className:e.mode},null===c?r.a.createElement("div",{className:"signup-page"},r.a.createElement("div",{className:"ribbon"},r.a.createElement("div",{className:"signup-card"},r.a.createElement("form",{onSubmit:I,className:"signup-form"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{autoFocus:!0,type:"email",onChange:function(e){return b(e.target.value)}}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",onChange:function(e){return E(e.target.value)}}),r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{type:"password",onChange:function(e){return x(e.target.value)}}),r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:e.confirmSignUp},"Back"),r.a.createElement("span",null," "),r.a.createElement("button",{type:"submit"},"Submit")))))):r.a.createElement("div",{className:"signup-page"},r.a.createElement("div",{className:"ribbon confirmation"},r.a.createElement("form",{onSubmit:T},r.a.createElement("label",null,"Confirmation Code "),r.a.createElement("input",{autoFocus:!0,type:"tel",onChange:function(e){return N(e.target.value)}}),r.a.createElement("button",null,"Submit"),r.a.createElement("h1",null,"Please check your email for the code.")))))}var R=a(30);a(178);var U=function(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(g.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(null),d=Object(g.a)(m,2),p=d[0],f=d[1],b=Object(n.useState)(null),h=Object(g.a)(b,2),v=h[0],k=h[1];function E(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=document.body.clientWidth,c=document.body.clientHeight,o=e.getObjects("line");for(var l in o)e.remove(o[l]);for(var s=Math.floor(c/t)+3,i=Math.floor(r/t)+3,u=-1*t,m=0;m<s;m++)e.add(new R.fabric.Line([u+a,m*t+u+n,r-u+a,m*t+u+n],{stroke:"grey",selectable:!1}));for(var d=0;d<i;d++)e.add(new R.fabric.Line([d*t+u+a,u+n,d*t+u+a,c-u+n],{stroke:"grey",selectable:!1}))}function y(t){if(t){var a=e.mapScale,n=document.body.clientWidth,r=document.body.clientHeight;if(t){var o=n/2-t.width/2*a,l=r/2-t.height/2*a;R.fabric.Image.fromURL(t.src,(function(e){var t=e.set({left:o,top:l,selectable:!1}).scale(a);c.setBackgroundImage(t),c.renderAll()}))}}}function w(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.off(),t.on("object:moving",(function(e){0===n&&0===r?(e.target.left=Math.round(e.target.left/a)*a,e.target.top=Math.round(e.target.top/a)*a):(e.target.left=Math.round(e.target.left/a)*a+n%a,e.target.top=Math.round(e.target.top/a)*a+r%a),e.target.setCoords()})),t.on("mouse:down",(function(e){if(!t.getActiveObject()){var a=e.e;if(!0===a.altKey&&(this.isDragging=!0,this.selection=!1,this.lastPosX=a.clientX,this.lastPosY=a.clientY),3===e.button){var n=e.e;this.isDragging=!0,this.selection=!1,this.lastPosX=n.clientX,this.lastPosY=n.clientY}}})),t.on("mouse:move",(function(t){if(this.isDragging){var a=t.e;if(!0===a.altKey){var n=a.clientX-this.lastPosX,r=a.clientY-this.lastPosY;return n>=20&&(n=20),n<=-20&&(n=-20),r>=20&&(r=20),r<=-20&&(r=-20),console.log(n+" "+r),w(this,e.gridScale,n,r),void E(this,e.gridScale,n,r)}var c=this.viewportTransform;c[4]+=a.clientX-this.lastPosX,c[5]+=a.clientY-this.lastPosY,this.requestRenderAll(),this.lastPosX=a.clientX,this.lastPosY=a.clientY}})),t.on("mouse:up",(function(e){this.isDragging&&(this.setViewportTransform(this.viewportTransform),this.isDragging=!1,this.selection=!0,document.getElementById("center").style.display="block")})),t.on("mouse:wheel",(function(e){var a=e.e.deltaY,n=t.getZoom();(n*=Math.pow(.999,a))>20&&(n=20),n<.5&&(n=.5),t.zoomToPoint({x:e.e.offsetX,y:e.e.offsetY},n),e.e.preventDefault(),e.e.stopPropagation(),document.getElementById("center").style.display="block"}))}function O(){var e=document.createElement("img");return e.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E",function(t,a,n,r,c){var o=this.cornerSize;t.save(),t.translate(a,n),t.rotate(R.fabric.util.degreesToRadians(c.angle)),t.drawImage(e,-o/2,-o/2,o,o),t.restore()}}function x(e,t){var a=t.canvas;a.remove(t),a.requestRenderAll()}return Object(n.useEffect)((function(){!function(){if(c)"dark-mode"===e.mode?(c.backgroundColor="#525959",c.renderAll()):(c.backgroundColor="white",c.renderAll()),e.gridScale!==v&&(w(c,e.gridScale),E(c,e.gridScale),k(e.gridScale)),e.currentMap!==i|e.mapScale!==p&&(y(e.currentMap),u(e.currentMap),f(e.mapScale));else{var t=new R.fabric.Canvas("canvas",{selection:!1,fireRightClick:!0});"dark-mode"===e.mode&&(t.backgroundColor="#525959"),o(t),w(t,e.gridScale),E(t,e.gridScale),y(e.currentMap),R.fabric.Object.prototype.controls.deleteControl=new R.fabric.Control({x:.5,y:-.5,offsetY:-16,offsetX:16,cursorStyle:"pointer",mouseUpHandler:x,render:O(),cornerSize:24}),k(e.gridScale),f(e.mapScale),u(e.currentMap)}}(),window.addEventListener("contextmenu",(function(e){e.preventDefault()}),!1)}),[e.currentMap,e.gridScale,e.mapScale,e.mode]),r.a.createElement(S,{drop:function(t){t.preventDefault();var a=t.dataTransfer.getData("transfer"),n=new Image;n.src=a;var r=t.clientX,o=t.clientY;!function(t,a,n){R.fabric.Image.fromURL(t.src,(function(t){var r=t.set({left:a,top:n});r.scaleToWidth(e.gridScale),r.scaleToHeight(e.gridScale),c.add(r)}))}(n,r,o)},allowDrop:function(e){e.preventDefault()}},r.a.createElement("div",{id:"center",onClick:function(){var e=c.getZoom(),t=document.body.clientWidth,a=document.body.clientHeight/2-c.getHeight()/2*e,n=t/2-c.getWidth()/2*e;c.viewportTransform[4]=n,c.viewportTransform[5]=a,c.requestRenderAll(),c.lastPosX=a,c.lastPosY=n,document.getElementById("center").style.display="none"}},r.a.createElement(K.b,null)),r.a.createElement("canvas",{id:"canvas",width:document.body.clientWidth,height:document.body.clientHeight}))};a(179),a(180);var _=function(e){var t=Object(n.useState)("none"),a=Object(g.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(g.a)(l,2),i=s[0],u=s[1];return Object(n.useEffect)((function(){e.selected?(o("display"),u(e.selected.name)):o("none")}),[e.selected]),r.a.createElement("div",{className:e.mode+" "+c},r.a.createElement(T.a,{handle:".handle"},r.a.createElement("div",{className:"token-information"},r.a.createElement("div",null,r.a.createElement(K.a,{className:"drag-icon handle"})),r.a.createElement("input",{type:"text",placeholder:"Name",value:i,onChange:function(e){u(e.target.value)}}),r.a.createElement("button",{className:"info-button",onClick:function(){var t=e.selected;t.name=i,e.updateTokenInfo(t)}},"Save"))))},B=a(212);function G(){return(G=Object(f.a)(d.a.mark((function e(t,a,n){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(Date.now()).concat(n),e.next=3,B.a.vault.put(r,t,{contentType:a});case 3:return c=e.sent,e.abrupt("return",c.key);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=function(e,t,a){return G.apply(this,arguments)};function F(){return(F=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.vault.get(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=function(e){return F.apply(this,arguments)},H=a(213);function z(e){return H.a.post("gameboard","/gameboard",{body:e})}function V(){return q.apply(this,arguments)}function q(){return(q=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H.a.get("gameboard","/gameboard"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){return H.a.put("gameboard","/gameboard/".concat(t),{body:e})}function Z(e,t,a){return $.apply(this,arguments)}function $(){return($=Object(f.a)(d.a.mark((function e(t,a,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={db:null,s3:null},e.next=3,J(a,t);case 3:return r.db=e.sent,e.next=6,B.a.vault.remove(n);case 6:return r.s3=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(204);var Q=a(116),ee=a.n(Q),te=a(117),ae=a.n(te);var ne=function(e){var t,a=Object(n.useState)(null),c=Object(g.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)({gameId:null,mapKeys:[],tokenKeys:[]}),i=Object(g.a)(s,2),u=i[0],m=(i[1],Object(n.useState)(null===(t=localStorage.getItem("mode"))?"light-mode":t)),b=Object(g.a)(m,2),h=b[0],v=b[1],k=Object(n.useState)("drawerClosed"),y=Object(g.a)(k,2),w=y[0],O=y[1],x=Object(n.useState)("drawerClosed"),j=Object(g.a)(x,2),S=j[0],N=j[1],D=Object(n.useState)(!1),T=Object(g.a)(D,2),P=T[0],K=T[1],R=Object(n.useState)([]),B=Object(g.a)(R,2),G=B[0],F=B[1],H=Object(n.useState)([]),q=Object(g.a)(H,2),$=q[0],Q=q[1],te=Object(n.useState)(null),ne=Object(g.a)(te,2),re=ne[0],ce=ne[1],oe=Object(n.useState)(1),le=Object(g.a)(oe,2),se=le[0],ie=le[1],ue=Object(n.useState)(50),me=Object(g.a)(ue,2),de=me[0],pe=me[1],fe=Object(n.useState)(!1),ge=Object(g.a)(fe,2),be=ge[0],he=ge[1],ve=Object(n.useState)(!1),ke=Object(g.a)(ve,2),Ee=ke[0],ye=ke[1],we=Object(n.useState)(!0),Oe=Object(g.a)(we,2),xe=(Oe[0],Oe[1],Object(n.useState)(!1)),je=Object(g.a)(xe,2),Se=je[0],Ce=je[1],Ne=Object(n.useState)(!1),Ie=Object(g.a)(Ne,2),De=Ie[0],Te=Ie[1];function Pe(e,t){return{content:{maps:e,tokens:t}}}function Ke(){return(Ke=Object(f.a)(d.a.mark((function e(){var t,a,n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Se&&!De){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,V();case 5:if(!(t=e.sent)[0]){e.next=25;break}l(t),u.gameId=t[0].gameid,u.mapKeys=t[0].content.maps,u.tokenKeys=t[0].content.tokens,a=d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(u.mapKeys[t]);case 2:a=e.sent,(n=new Image).src=a,r={img:n,key:u.mapKeys[t]},F((function(e){return[].concat(Object(p.a)(e),[r])}));case 7:case"end":return e.stop()}}),e)})),n=0;case 13:if(!(n<u.mapKeys.length)){e.next=18;break}return e.delegateYield(a(n),"t0",15);case 15:++n,e.next=13;break;case 18:r=d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(u.tokenKeys[t]);case 2:a=e.sent,(n=new Image).src=a,r={img:n,key:u.tokenKeys[t]},Q((function(e){return[].concat(Object(p.a)(e),[r])}));case 7:case"end":return e.stop()}}),e)})),c=0;case 20:if(!(c<u.tokenKeys.length)){e.next=25;break}return e.delegateYield(r(c),"t1",22);case 22:++c,e.next=20;break;case 25:e.next=29;break;case 27:e.prev=27,e.t2=e.catch(2);case 29:case"end":return e.stop()}}),e,null,[[2,27]])})))).apply(this,arguments)}function Me(){return(Me=Object(f.a)(d.a.mark((function e(t){var a,n,r,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!De){e.next=5;break}for(a=new Array,n=0;n<G.length;n++)G[n].key!==t&&a.push(G[n]);return F(a),e.abrupt("return");case 5:return e.prev=5,(r=u.mapKeys.indexOf(t))>-1&&(u.mapKeys.splice(r,1),(c=Object(p.a)(G)).splice(r,1),F(c)),o=Pe(u.mapKeys,u.tokenKeys),e.next=11,Z(u.gameId,o,t);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),alert(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}function Le(){return(Le=Object(f.a)(d.a.mark((function e(t){var a,n,r,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!De){e.next=5;break}for(a=new Array,n=0;n<$.length;n++)$[n].key!==t&&a.push($[n]);return Q(a),e.abrupt("return");case 5:return e.prev=5,(r=u.tokenKeys.indexOf(t))>-1&&(u.tokenKeys.splice(r,1),(c=Object(p.a)($)).splice(r,1),Q(c)),o=Pe(u.mapKeys,u.tokenKeys),e.next=11,Z(u.gameId,o,t);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),alert(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}function Ae(){return(Ae=Object(f.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.signIn(t,a);case 3:_e(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert("Login error:"+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function Ye(){return(Ye=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.currentSession();case 3:_e(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function Re(){return(Re=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.signOut();case 2:Ce(!1),Q([]),F([]),ce(null),pe(50),ie(1),Te(!1),Be();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(){ye(!1)}function _e(){Ce(!0)}function Be(){K(!1),he(!1),O("drawerClosed"),N("drawerClosed")}function Ge(){"light-mode"===h?(v("dark-mode"),localStorage.setItem("mode","dark-mode")):(v("light-mode"),localStorage.setItem("mode","light-mode"))}function Xe(){"drawerOpen"===S&&Fe(),O("drawerClosed"===w?"drawerDocked":"drawerClosed")}function Fe(){"drawerDocked"===w&&Xe(),N("drawerClosed"===S?"drawerOpen":"drawerClosed")}function We(){return(We=Object(f.a)(d.a.mark((function e(t){var a,n,r,c,l,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new FileReader,n=t.target.files,ze(r=n[0])){e.next=5;break}return e.abrupt("return");case 5:if(!(G.length>4)){e.next=8;break}return alert("You cannot have more than 5 maps uploaded during this stage of development."),e.abrupt("return");case 8:if(o||De){e.next=25;break}return e.prev=9,e.next=12,X(r,r.type,"map");case 12:return c=e.sent,e.next=15,z(Pe(u.mapKeys,u.tokenKeys));case 15:l=e.sent,u.gameId=l.gameid,u.mapKeys=[c],e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),alert(e.t0);case 23:e.next=39;break;case 25:if(De){e.next=39;break}return e.prev=26,e.next=29,X(r,r.type,"map");case 29:return c=e.sent,s=u.mapKeys,u.mapKeys=[].concat(Object(p.a)(s),[c]),e.next=34,J(Pe(u.mapKeys,u.tokenKeys),u.gameId);case 34:e.next=39;break;case 36:e.prev=36,e.t1=e.catch(26),alert(e.t1);case 39:void 0===c&&(i=new Date,c=i.getTime()),a.onload=function(){var e=new Image;e.src=a.result;var t={img:e,key:c};F((function(e){return[].concat(Object(p.a)(e),[t])}))},a.readAsDataURL(r);case 42:case"end":return e.stop()}}),e,null,[[9,20],[26,36]])})))).apply(this,arguments)}function He(){return(He=Object(f.a)(d.a.mark((function e(t){var a,n,r,c,l,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files,n=new FileReader,Ve(r=a[0])){e.next=5;break}return e.abrupt("return");case 5:if(!($.length>9)){e.next=8;break}return alert("You cannot have more than 10 tokens uploaded during this stage of development."),e.abrupt("return");case 8:if(o||De){e.next=25;break}return e.prev=9,e.next=12,X(r,r.type,"token");case 12:return c=e.sent,e.next=15,z(Pe(u.mapKeys,u.tokenKeys));case 15:l=e.sent,u.gameId=l.gameid,u.tokenKeys=[c],e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),alert(e.t0);case 23:e.next=39;break;case 25:if(De){e.next=39;break}return e.prev=26,e.next=29,X(r,r.type,"token");case 29:return c=e.sent,s=u.tokenKeys,u.tokenKeys=[].concat(Object(p.a)(s),[c]),e.next=34,J(Pe(u.mapKeys,u.tokenKeys),u.gameId);case 34:e.next=39;break;case 36:e.prev=36,e.t1=e.catch(26),alert(e.t1);case 39:void 0===c&&(i=new Date,c=i.getTime()),n.onload=function(){var e=new Image;e.src=n.result;var t={img:e,key:c,name:""};Q((function(e){return[].concat(Object(p.a)(e),[t])}))},n.readAsDataURL(r);case 42:case"end":return e.stop()}}),e,null,[[9,20],[26,36]])})))).apply(this,arguments)}function ze(e){return e&&e.size>2e5?(alert("Please pick a file smaller than ".concat(.2," MB.")),0):1}function Ve(e){return e&&e.size>16e4?(alert("Please pick a file smaller than ".concat(20," kb.")),0):1}return Object(n.useEffect)((function(){!function(){Ye.apply(this,arguments)}(),function(){Ke.apply(this,arguments)}(),De&&function(){var e=new Image,t=new Image,a=new Array;e.src=ee.a,t.src=ae.a;var n={img:e,key:"testToken1",name:"Dax"},r={img:t,key:"testToken2",name:"Pop"};a.push(n),a.push(r),Q(a)}()}),[Se]),r.a.createElement("div",{className:"App"},r.a.createElement(_,{mode:h,selected:be,updateTokenInfo:function(e){console.log(e);for(var t=Object(p.a)($),a=t.length,n=0;n<a;++n)t[n].key===e.key&&(t[n]=e);Q(t)}}),Ee&&r.a.createElement(Y,{mode:h,userHasAuthenticated:Ce,confirmSignUp:Ue}),Se?r.a.createElement(U,{mode:h,gridScale:de,currentMap:re,mapScale:se}):r.a.createElement(L,{mode:h,toggleMode:Ge,runTest:function(){Ce(!0),Te(!0)},authenticateLogin:_e,signUp:function(){ye(!0)},confirmSignUp:Ue,handleSubmit:function(e,t){return Ae.apply(this,arguments)}}),P&&r.a.createElement(M,{mode:h,scaleGrid:function(e){var t=parseInt(e.target.value);pe(t)},scaleMap:function(e){var t=e.target.value/50;ie(t)},handleLogout:function(){return Re.apply(this,arguments)},toggleMode:Ge}),r.a.createElement(E,{mode:h,toggleTokens:Xe,toggleMaps:Fe,toggleOptions:function(){K(!P)},close:Be}),r.a.createElement(C,{mode:h,state:w,getToken:function(e){return He.apply(this,arguments)},tokens:$,deleteToken:function(e){return Le.apply(this,arguments)},tokenInformation:function(e){for(var t=$.length,a=-1,n=0;n<t;++n)$[n].key===e&&(a=n);-1!==a&&($[a].key===be.key?he(!1):he($[a]))}}),r.a.createElement(I,{mode:h,state:S,getMap:function(e){return We.apply(this,arguments)},maps:G,changeMap:function(e){var t=G[e.target.id[0]];ce(t.img)},deleteMap:function(e){return Me.apply(this,arguments)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.configure({Auth:{mandatorySignIn:!0,region:u.REGION,userPoolId:u.USER_POOL_ID,identityPoolId:u.IDENTITY_POOL_ID,userPoolWebClientId:u.APP_CLIENT_ID},Storage:{region:s.REGION,bucket:s.BUCKET,identityPoolId:u.IDENTITY_POOL_ID},API:{endpoints:[{name:"gameboard",endpoint:i.URL,region:i.REGION}]}}),o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[127,1,2]]]);
//# sourceMappingURL=main.d8616857.chunk.js.map