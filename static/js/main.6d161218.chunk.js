(this.webpackJsonpgameboard=this.webpackJsonpgameboard||[]).push([[0],{114:function(e,t,a){e.exports=a.p+"static/media/dax.3ae1a4a7.jpg"},115:function(e,t,a){e.exports=a.p+"static/media/pop.1b43a648.jpg"},127:function(e,t,a){e.exports=a(205)},132:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},173:function(e,t,a){},174:function(e,t,a){},175:function(e,t){},176:function(e,t){},177:function(e,t){},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),c=a(56),o=a.n(c),l=a(22),s={REGION:"us-west-2",BUCKET:"gameboard-uploads"},i={REGION:"us-west-2",URL:"https://k6r2pgn41j.execute-api.us-west-2.amazonaws.com/prod"},u={REGION:"us-west-2",USER_POOL_ID:"us-west-2_55lKkN867",APP_CLIENT_ID:"1jtkpri800074n0e9amfsekbja",IDENTITY_POOL_ID:"us-west-2:d02cca9d-cd85-4f92-87bb-4e0ca6b75fdc"},m=(a(132),a(6)),d=a.n(m),p=a(12),f=a(5),g=a(73);a(134);var b=function(e){return r.a.createElement("div",{className:e.mode},r.a.createElement("div",{id:"mode-container"},r.a.createElement("label",null,"Dark Mode"),r.a.createElement("div",null,r.a.createElement("label",{className:"switch"},r.a.createElement("input",{onClick:e.toggleMode,type:"checkbox",checked:e.check,readOnly:!0}),r.a.createElement("span",{className:"slider round"})))))};a(135),a(136),a(137);var h=function(e){var t=Object(n.useState)(void 0),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(void 0),s=Object(f.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(e.mode),d=Object(f.a)(m,2),p=d[0],g=d[1];return Object(n.useEffect)((function(){g(e.mode)}),[e.mode]),r.a.createElement("div",{className:p},r.a.createElement("div",{className:"login-page"},r.a.createElement("link",{rel:"stylesheet",type:"text/css",href:"./styles/lightmode.css"}),r.a.createElement("div",{className:"ribbon ribbon-"+p},r.a.createElement("div",{className:"title title-"+p},r.a.createElement("h1",{className:"h1-"+p},"Battlemaps"),r.a.createElement("p",null,"Virtual Tabletop Toolset")),r.a.createElement("div",{className:"login-form"},r.a.createElement("form",{onSubmit:function(t){e.handleSubmit(c,i),t.preventDefault()}},r.a.createElement("input",{autoFocus:!0,type:"email",value:c,placeholder:"Email",onChange:function(e){return o(e.target.value)}}),r.a.createElement("input",{value:i,placeholder:"Password",onChange:function(e){return u(e.target.value)},type:"password"}),r.a.createElement("div",null,r.a.createElement("button",{className:"login-button lightMode",disabled:!function(){if(c&&i)return c.length>0&&i.length>0}(),type:"submit",tabIndex:"3"},r.a.createElement("span",null,"Login")))),r.a.createElement("div",{className:"links"},r.a.createElement("span",null,"Dont have an account?"),r.a.createElement("a",{onClick:e.signUp,tabIndex:"1"},r.a.createElement("span",null," Sign up here")),r.a.createElement("span",null,"or"),r.a.createElement("a",{onClick:e.runTest,tabIndex:"2"},r.a.createElement("span",null,"Try without signing up")))))),r.a.createElement("div",{id:"login-toggle",className:e.mode},r.a.createElement(b,{check:"dark-mode"===e.mode,toggleMode:e.toggleMode,mode:e.mode})))};a(138),a(139),a(140);function v(e){var t=Object(n.useState)(null),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(f.a)(l,2),i=(s[0],s[1]),u=Object(n.useState)(null),m=Object(f.a)(u,2),b=m[0],h=m[1],v=Object(n.useState)(null),k=Object(f.a)(v,2),E=k[0],y=k[1],O=Object(n.useState)(null),w=Object(f.a)(O,2),j=w[0],x=w[1],S=Object(n.useState)(null),I=Object(f.a)(S,2),C=I[0],N=I[1];function T(e){return D.apply(this,arguments)}function D(){return(D=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),E===j){e.next=4;break}return alert("Passwords do not match"),e.abrupt("return");case 4:return i(!0),e.prev=5,e.next=8,g.a.signUp({username:b,password:E});case 8:a=e.sent,i(!1),o(a),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),alert(e.t0.message),i(!1);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}function M(e){return P.apply(this,arguments)}function P(){return(P=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),i(!0),t.prev=2,t.next=5,g.a.confirmSignUp(b,C);case 5:return t.next=7,g.a.signIn(b,E);case 7:e.confirmSignUp(),e.userHasAuthenticated(!0),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),alert(t.t0.message),i(!1);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))).apply(this,arguments)}return r.a.createElement("div",{className:e.mode},null===c?r.a.createElement("div",{className:"signup-page"},r.a.createElement("div",{className:"ribbon"},r.a.createElement("div",{className:"signup-card"},r.a.createElement("form",{onSubmit:T,className:"signup-form"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{autoFocus:!0,type:"email",onChange:function(e){return h(e.target.value)}}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",onChange:function(e){return y(e.target.value)}}),r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{type:"password",onChange:function(e){return x(e.target.value)}}),r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:e.confirmSignUp},"Back"),r.a.createElement("span",null," "),r.a.createElement("button",{type:"submit"},"Submit")))))):r.a.createElement("div",{className:"signup-page"},r.a.createElement("div",{className:"ribbon confirmation"},r.a.createElement("form",{onSubmit:M},r.a.createElement("label",null,"Confirmation Code "),r.a.createElement("input",{autoFocus:!0,type:"tel",onChange:function(e){return N(e.target.value)}}),r.a.createElement("button",null,"Submit"),r.a.createElement("h1",null,"Please check your email for the code.")))))}var k=function(e){var t=Object(n.useState)(null),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(f.a)(l,2),i=(s[0],s[1]);function u(){return(u=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.currentSession();case 3:return e.sent,k(),e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function m(e,t){return b.apply(this,arguments)}function b(){return(b=Object(p.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.signIn(t,a);case 3:return k(),e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),alert("Login error:"+e.t0.message),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function k(){i(!0),o(null),e.setLoggedIn(!0)}function E(){o(null),e.setIsTest(!0)}function y(){O()}function O(){(function(){return u.apply(this,arguments)})()&&o(r.a.createElement(h,{mode:e.mode,toggleMode:e.toggleMode,runTest:E,authenticateLogin:k,signUp:w,confirmSignUp:y,handleSubmit:m}))}function w(){o(r.a.createElement(v,{mode:e.mode,userHasAuthenticated:i,confirmSignUp:y}))}return Object(n.useEffect)((function(){O()}),[e.mode]),r.a.createElement("div",null,c)},E=a(30),y=a(106),O=a(19),w=a(108),j=a(107);a(161),a(162);var x=function(e){return r.a.createElement("div",{className:e.mode},r.a.createElement("div",{className:"tray"},r.a.createElement("div",{className:"edit-icon"},r.a.createElement(y.a,{onClick:e.toggleTokens})),r.a.createElement("div",{className:"edit-icon"},r.a.createElement(O.d,{onClick:e.toggleMaps})),r.a.createElement("div",{className:"edit-icon"},r.a.createElement(j.a,{onClick:e.close})),r.a.createElement("div",{className:"edit-icon"},r.a.createElement(w.a,{onClick:e.toggleOptions}))))};var S=function(e){var t,a;return r.a.createElement("div",{id:e.id,draggable:"true",onDragStart:function(e){e.dataTransfer.setData("transfer",e.target.src)},onTouchStart:function(e){console.log("Grabbed",e)},onTouchEnd:function(n){var r={src:null,x:null,y:null};r.src=n.target.src,r.x=t,r.y=a,e.dragHandler(r)},onTouchMove:function(e){console.log("Dragging"),t=e.touches[0].clientX,a=e.touches[0].clientY},onDragOver:function(e){e.stopPropagation()}},e.children)},I=a(109),C=a(110),N=a(117),T=a(116),D=function(e){Object(N.a)(a,e);var t=Object(T.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(C.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,onDrop:this.props.drop,onDragOver:this.props.allowDrop},this.props.children)}}]),a}(r.a.Component);a(163),a(164);var M=function(e){var t=Object(n.useState)(null),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)("show-options"),s=Object(f.a)(l,2),i=s[0],u=(s[1],Object(n.useState)([])),m=Object(f.a)(u,2),d=m[0],p=m[1];function g(e){o(parseInt(e.target.id[0]))}function b(e){o(null)}Object(n.useEffect)((function(){p(e.tokens)}),[e.tokens]);var h="token-drawer";return h="drawerDocked"===e.state?"token-drawer docked":"token-drawer",r.a.createElement("div",{className:e.mode},r.a.createElement("div",{className:h},r.a.createElement("div",{className:"searchbar"},r.a.createElement("input",{type:"text",placeholder:"Search..",onChange:function(t){if(""!==t.target.value){for(var a=d.length,n=[],r=0;r<a;++r)d[r].name.toLowerCase().includes(t.target.value.toLowerCase())&&n.push(d[r]);p(n),console.log(n)}else p(e.tokens)}})),r.a.createElement("div",{className:"token-container"},r.a.createElement("div",{className:"upload-form-token"},r.a.createElement("form",{action:"/action_page.php",className:"token-form"},r.a.createElement("label",{htmlFor:"token-input"},r.a.createElement("div",{className:"add-icon-token"},r.a.createElement(O.a,null))),r.a.createElement("input",{id:"token-input",type:"file",onChange:e.getToken}))),d[0]?d.map((function(t,a){return r.a.createElement("div",{className:"token-img"},r.a.createElement(D,{id:a+"droppable"},r.a.createElement(S,{id:a+"token",dragHandler:e.dragHandler},r.a.createElement("div",{className:"token-thumbnails"},c===a?r.a.createElement("img",{className:i+" token",alt:"...",id:a+"token",draggable:"true",src:t.img.src,onDoubleClick:g,onClick:b}):r.a.createElement("img",{className:"token",alt:"...",id:a+"token",draggable:"true",src:t.img.src,onDoubleClick:g,onClick:b}),r.a.createElement("div",{className:"token-options"},r.a.createElement("div",{className:"delete-token option-btn",onClick:function(){return e.deleteToken(t.key)}},r.a.createElement(O.c,null)),r.a.createElement("div",{className:"info-token option-btn",onClick:function(){return e.tokenInformation(t.key)}},r.a.createElement(O.b,null)))))))})):r.a.createElement("p",null,"Add a token. Drag and drop the token onto the grid. Scale token to grid by double clicking the token."))))};a(165),a(166);var P=function(e){var t=Object(n.useState)(null),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)("selected"),s=Object(f.a)(l,2),i=s[0],u=s[1];function m(t){o(parseInt(t.target.id[0])),e.changeMap(t),u("selected")}function d(e){o(parseInt(e.target.id[0])),u("selected show-options"===i?"selected":"selected show-options")}var p="map-drawer";return p="drawerOpen"===e.state?"map-drawer open":"map-drawer",r.a.createElement("div",{className:e.mode},r.a.createElement("div",{className:p},r.a.createElement("div",{className:"map-container"},r.a.createElement("div",{className:"upload-form"},r.a.createElement("form",{action:"/action_page.php",className:"map-form"},r.a.createElement("label",{htmlFor:"map-file-input"},r.a.createElement("div",{className:"add-icon"},r.a.createElement(O.a,null))),r.a.createElement("input",{id:"map-file-input",type:"file",onChange:e.getMap}))),e.maps[0]?e.maps.map((function(t,a){return r.a.createElement("div",{className:"map-thumbnails"},c===a?r.a.createElement("img",{className:i+" map",src:t.img.src,alt:"...",id:a+"m",onClick:m,onDoubleClick:d}):r.a.createElement("img",{className:"map",src:t.img.src,alt:"...",id:a+"map",onClick:m,onDoubleClick:d}),r.a.createElement("div",{className:"delete-map option-btn",onClick:function(){return function(t){for(var a=e.maps,n=new Array,r=0;r<a.length;r++)a[r].key!==t&&(n.push(a[r]),console.log(a[r].key,t));e.deleteMap(n,t)}(t.key)}},r.a.createElement(O.c,null)))})):r.a.createElement("p",null,"Add a map. Switch maps by clicking on the thumbnails."))))},K=a(65),L=a.n(K),Y=a(39);a(173),a(174);var A=function(e){return Object(n.useEffect)((function(){e.state?document.getElementById("optionTray").style.display="block":document.getElementById("optionTray").style.display="none"}),[e.state]),r.a.createElement("div",{className:e.mode,id:"optionTray"},r.a.createElement(L.a,{handle:".handle"},r.a.createElement("div",{className:"options"},r.a.createElement("div",null,r.a.createElement(Y.a,{className:"drag-icon handle"})),r.a.createElement("div",null,"Grid Size"),r.a.createElement("div",null,r.a.createElement("input",{type:"range",min:"10",max:"100",class:"slider",onInput:e.scaleGrid.bind(this)})),r.a.createElement("div",null,"Map Size"),r.a.createElement("div",null,r.a.createElement("input",{type:"range",min:"10",max:"100",class:"slider",onInput:e.scaleMap.bind(this)})),r.a.createElement("div",null,r.a.createElement(b,{check:"dark-mode"===e.mode,toggleMode:e.toggleMode,mode:e.mode})),r.a.createElement("div",null,r.a.createElement("div",{className:"logout-button",onClick:e.handleLogout.bind(this)},r.a.createElement("span",null,"Log Out"))))))},R=a(29);a(178);var U=function(e){var t=Object(n.useState)(null),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(f.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(null),d=Object(f.a)(m,2),p=d[0],g=d[1],b=Object(n.useState)(null),h=Object(f.a)(b,2),v=h[0],k=h[1];function E(t,a,n){R.fabric.Image.fromURL(t.src,(function(t){var r=t.set({left:a,top:n});r.scaleToWidth(e.gridScale),r.scaleToHeight(e.gridScale),c.add(r)}))}function y(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=document.body.clientWidth,c=document.body.clientHeight,o=e.getObjects("line");for(var l in o)e.remove(o[l]);for(var s=Math.floor(c/t)+3,i=Math.floor(r/t)+3,u=-1*t,m=0;m<s;m++)e.add(new R.fabric.Line([u+a,m*t+u+n,r-u+a,m*t+u+n],{stroke:"grey",selectable:!1}));for(var d=0;d<i;d++)e.add(new R.fabric.Line([d*t+u+a,u+n,d*t+u+a,c-u+n],{stroke:"grey",selectable:!1}))}function O(t){if(t){var a=e.mapScale,n=document.body.clientWidth,r=document.body.clientHeight;if(t){var o=n/2-t.width/2*a,l=r/2-t.height/2*a;R.fabric.Image.fromURL(t.src,(function(e){var t=e.set({left:o,top:l,selectable:!1}).scale(a);c.setBackgroundImage(t),c.renderAll()}))}}}function w(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.off(),t.on("object:moving",(function(e){0===n&&0===r?(e.target.left=Math.round(e.target.left/a)*a,e.target.top=Math.round(e.target.top/a)*a):(e.target.left=Math.round(e.target.left/a)*a+n%a,e.target.top=Math.round(e.target.top/a)*a+r%a),e.target.setCoords()})),t.on("mouse:down",(function(e){if(!t.getActiveObject()){var a=e.e;if(!0===a.altKey&&(this.isDragging=!0,this.selection=!1,this.lastPosX=a.clientX,this.lastPosY=a.clientY),3===e.button){var n=e.e;this.isDragging=!0,this.selection=!1,this.lastPosX=n.clientX,this.lastPosY=n.clientY}}})),t.on("mouse:move",(function(t){if(this.isDragging){var a=t.e;if(!0===a.altKey){var n=a.clientX-this.lastPosX,r=a.clientY-this.lastPosY;return n>=20&&(n=20),n<=-20&&(n=-20),r>=20&&(r=20),r<=-20&&(r=-20),console.log(n+" "+r),w(this,e.gridScale,n,r),void y(this,e.gridScale,n,r)}var c=this.viewportTransform;c[4]+=a.clientX-this.lastPosX,c[5]+=a.clientY-this.lastPosY,this.requestRenderAll(),this.lastPosX=a.clientX,this.lastPosY=a.clientY}})),t.on("mouse:up",(function(e){this.isDragging&&(this.setViewportTransform(this.viewportTransform),this.isDragging=!1,this.selection=!0,document.getElementById("center").style.display="block")})),t.on("mouse:wheel",(function(e){var a=e.e.deltaY,n=t.getZoom();(n*=Math.pow(.999,a))>20&&(n=20),n<.5&&(n=.5),t.zoomToPoint({x:e.e.offsetX,y:e.e.offsetY},n),e.e.preventDefault(),e.e.stopPropagation(),document.getElementById("center").style.display="block"})),t.on("touch:longpress",(function(e){alert("pop")}))}function j(){var e=document.createElement("img");return e.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E",function(t,a,n,r,c){var o=this.cornerSize;t.save(),t.translate(a,n),t.rotate(R.fabric.util.degreesToRadians(c.angle)),t.drawImage(e,-o/2,-o/2,o,o),t.restore()}}function x(e,t){var a=t.canvas;a.remove(t),a.requestRenderAll()}return Object(n.useEffect)((function(){!function(){if(c)"dark-mode"===e.mode?(c.backgroundColor="#525959",c.renderAll()):(c.backgroundColor="white",c.renderAll()),e.gridScale!==v&&(w(c,e.gridScale),y(c,e.gridScale),k(e.gridScale)),e.currentMap!==i|e.mapScale!==p&&(O(e.currentMap),u(e.currentMap),g(e.mapScale));else{var t=new R.fabric.Canvas("canvas",{selection:!1,fireRightClick:!0});"dark-mode"===e.mode&&(t.backgroundColor="#525959"),o(t),w(t,e.gridScale),y(t,e.gridScale),O(e.currentMap),R.fabric.Object.prototype.controls.deleteControl=new R.fabric.Control({x:.5,y:-.5,offsetY:-16,offsetX:16,cursorStyle:"pointer",mouseUpHandler:x,render:j(),cornerSize:24}),k(e.gridScale),g(e.mapScale),u(e.currentMap)}}(),function(){if(null===e.toDrop)return;var t=new Image;t.src=e.toDrop.src;var a=e.toDrop.x,n=e.toDrop.y;E(t,a,n),e.setToDrop(null)}(),window.addEventListener("contextmenu",(function(e){e.preventDefault()}),!1)}),[e.currentMap,e.gridScale,e.mapScale,e.mode,e.toDrop]),r.a.createElement(D,{drop:function(t){t.preventDefault();var a=t.dataTransfer.getData("transfer"),n=new Image;n.src=a,console.log(e.gridScale),E(n,t.clientX,t.clientY)},allowDrop:function(e){e.preventDefault()}},r.a.createElement("div",{id:"center",onClick:function(){var e=c.getZoom(),t=document.body.clientWidth,a=document.body.clientHeight/2-c.getHeight()/2*e,n=t/2-c.getWidth()/2*e;c.viewportTransform[4]=n,c.viewportTransform[5]=a,c.requestRenderAll(),c.lastPosX=a,c.lastPosY=n,document.getElementById("center").style.display="none"}},r.a.createElement(Y.b,null)),r.a.createElement("canvas",{id:"canvas",width:document.body.clientWidth,height:document.body.clientHeight}))};a(179),a(180);var _=function(e){var t=Object(n.useState)("none"),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(f.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(""),d=Object(f.a)(m,2),p=d[0],g=d[1],b=Object(n.useState)(""),h=Object(f.a)(b,2),v=h[0],k=h[1];function E(e){"hpMax"===e.target.id?g(e.target.value):k(e.target.value)}return Object(n.useEffect)((function(){e.selected?(o("display"),u(e.selected.name),g(e.selected.hp.max),k(e.selected.hp.min)):o("none")}),[e.selected]),r.a.createElement("div",{className:e.mode+" "+c},r.a.createElement(L.a,{handle:".handle"},r.a.createElement("div",{className:"token-information"},r.a.createElement("div",null,r.a.createElement(Y.a,{className:"drag-icon handle"})),r.a.createElement("input",{type:"text",placeholder:"Name",value:i,onChange:function(e){u(e.target.value)}}),r.a.createElement("div",{className:"binary-tracker"},r.a.createElement("input",{type:"number",id:"hpMin",value:v,onChange:E}),r.a.createElement("span",null," / "),r.a.createElement("input",{type:"number",id:"hpMax",value:p,onChange:E})),r.a.createElement("button",{className:"info-button",onClick:function(){var t=e.selected;t.name=i,t.hp={max:p,min:v},e.updateTokenInfo(t)}},"Save"))))},B=a(212);function X(){return(X=Object(p.a)(d.a.mark((function e(t,a,n){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(Date.now()).concat(n),e.next=3,B.a.vault.put(r,t,{contentType:a});case 3:return c=e.sent,e.abrupt("return",c.key);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=function(e,t,a){return X.apply(this,arguments)};function H(){return(H=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.vault.get(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=function(e){return H.apply(this,arguments)},W=a(213);function z(e){return W.a.post("gameboard","/gameboard",{body:e})}function V(){return q.apply(this,arguments)}function q(){return(q=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.a.get("gameboard","/gameboard"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){return W.a.put("gameboard","/gameboard/".concat(t),{body:e})}function Z(e,t,a){return $.apply(this,arguments)}function $(){return($=Object(p.a)(d.a.mark((function e(t,a,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={db:null,s3:null},e.next=3,J(a,t);case 3:return r.db=e.sent,e.next=6,B.a.vault.remove(n);case 6:return r.s3=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=a(114),ee=a.n(Q),te=a(115),ae=a.n(te);var ne=function(e){var t=Object(n.useState)(null),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)({gameId:null,mapKeys:[],tokenKeys:[]}),s=Object(f.a)(l,2),i=s[0],u=(s[1],Object(n.useState)("drawerClosed")),m=Object(f.a)(u,2),g=m[0],b=m[1],h=Object(n.useState)("drawerClosed"),v=Object(f.a)(h,2),k=v[0],y=v[1],O=Object(n.useState)(!1),w=Object(f.a)(O,2),j=w[0],S=w[1],I=Object(n.useState)([]),C=Object(f.a)(I,2),N=C[0],T=C[1],D=Object(n.useState)([]),K=Object(f.a)(D,2),L=K[0],Y=K[1],R=Object(n.useState)(null),B=Object(f.a)(R,2),X=B[0],H=B[1],W=Object(n.useState)(1),q=Object(f.a)(W,2),$=q[0],Q=q[1],te=Object(n.useState)(50),ne=Object(f.a)(te,2),re=ne[0],ce=ne[1],oe=Object(n.useState)(!1),le=Object(f.a)(oe,2),se=le[0],ie=le[1],ue=Object(n.useState)(null),me=Object(f.a)(ue,2),de=me[0],pe=me[1];function fe(e,t){return{content:{maps:e,tokens:t}}}function ge(){return(ge=Object(p.a)(d.a.mark((function t(){var a,n,r,c,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isTest){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,V();case 5:if(!(a=t.sent)[0]){t.next=25;break}o(a),i.gameId=a[0].gameid,i.mapKeys=a[0].content.maps,i.tokenKeys=a[0].content.tokens,n=d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(i.mapKeys[t]);case 2:a=e.sent,(n=new Image).src=a,r={img:n,key:i.mapKeys[t]},T((function(e){return[].concat(Object(E.a)(e),[r])}));case 7:case"end":return e.stop()}}),e)})),r=0;case 13:if(!(r<i.mapKeys.length)){t.next=18;break}return t.delegateYield(n(r),"t0",15);case 15:++r,t.next=13;break;case 18:c=d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(i.tokenKeys[t]);case 2:a=e.sent,(n=new Image).src=a,r={img:n,key:i.tokenKeys[t]},Y((function(e){return[].concat(Object(E.a)(e),[r])}));case 7:case"end":return e.stop()}}),e)})),l=0;case 20:if(!(l<i.tokenKeys.length)){t.next=25;break}return t.delegateYield(c(l),"t1",22);case 22:++l,t.next=20;break;case 25:t.next=30;break;case 27:t.prev=27,t.t2=t.catch(2),console.log(t.t2);case 30:case"end":return t.stop()}}),t,null,[[2,27]])})))).apply(this,arguments)}function be(){return(be=Object(p.a)(d.a.mark((function t(a,n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isTest){t.next=3;break}return T(a),t.abrupt("return");case 3:return t.prev=3,(r=i.mapKeys.indexOf(n+"map"))>-1&&(i.mapKeys.splice(r,1),a.splice(r,1),T(a)),c=fe(i.mapKeys,i.tokenKeys),t.next=9,Z(i.gameId,c,n);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})))).apply(this,arguments)}function he(){return(he=Object(p.a)(d.a.mark((function t(a){var n,r,c,o,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isTest){t.next=5;break}for(n=new Array,r=0;r<L.length;r++)L[r].key!==a&&n.push(L[r]);return Y(n),t.abrupt("return");case 5:return t.prev=5,(c=i.tokenKeys.indexOf(a))>-1&&(i.tokenKeys.splice(c,1),(o=Object(E.a)(L)).splice(c,1),Y(o)),l=fe(i.mapKeys,i.tokenKeys),t.next=11,Z(i.gameId,l,a);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),alert(t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})))).apply(this,arguments)}function ve(){"drawerOpen"===k&&ke(),b("drawerClosed"===g?"drawerDocked":"drawerClosed")}function ke(){"drawerDocked"===g&&ve(),y("drawerClosed"===k?"drawerOpen":"drawerClosed")}function Ee(){return(Ee=Object(p.a)(d.a.mark((function t(a){var n,r,o,l,s,u,m;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new FileReader,r=a.target.files,Oe(o=r[0])){t.next=5;break}return t.abrupt("return");case 5:if(!(N.length>4)){t.next=8;break}return alert("You cannot have more than 5 maps uploaded during this stage of development."),t.abrupt("return");case 8:if(c||e.isTest){t.next=25;break}return t.prev=9,t.next=12,G(o,o.type,"map");case 12:return l=t.sent,t.next=15,z(fe(i.mapKeys,i.tokenKeys));case 15:s=t.sent,i.gameId=s.gameid,i.mapKeys=[l],t.next=23;break;case 20:t.prev=20,t.t0=t.catch(9),alert(t.t0);case 23:t.next=39;break;case 25:if(e.isTest){t.next=39;break}return t.prev=26,t.next=29,G(o,o.type,"map");case 29:return l=t.sent,u=i.mapKeys,i.mapKeys=[].concat(Object(E.a)(u),[l]),t.next=34,J(fe(i.mapKeys,i.tokenKeys),i.gameId);case 34:t.next=39;break;case 36:t.prev=36,t.t1=t.catch(26),alert(t.t1);case 39:void 0===l&&(m=new Date,l=m.getTime()),n.onload=function(){var e=new Image;e.src=n.result;var t={img:e,key:l};T((function(e){return[].concat(Object(E.a)(e),[t])}))},n.readAsDataURL(o);case 42:case"end":return t.stop()}}),t,null,[[9,20],[26,36]])})))).apply(this,arguments)}function ye(){return(ye=Object(p.a)(d.a.mark((function t(a){var n,r,o,l,s,u,m;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.target.files,r=new FileReader,we(o=n[0])){t.next=5;break}return t.abrupt("return");case 5:if(!(L.length>9)){t.next=8;break}return alert("You cannot have more than 10 tokens uploaded during this stage of development."),t.abrupt("return");case 8:if(c||e.isTest){t.next=25;break}return t.prev=9,t.next=12,G(o,o.type,"token");case 12:return l=t.sent,t.next=15,z(fe(i.mapKeys,i.tokenKeys));case 15:s=t.sent,i.gameId=s.gameid,i.tokenKeys=[l],t.next=23;break;case 20:t.prev=20,t.t0=t.catch(9),alert(t.t0);case 23:t.next=39;break;case 25:if(e.isTest){t.next=39;break}return t.prev=26,t.next=29,G(o,o.type,"token");case 29:return l=t.sent,u=i.tokenKeys,i.tokenKeys=[].concat(Object(E.a)(u),[l]),t.next=34,J(fe(i.mapKeys,i.tokenKeys),i.gameId);case 34:t.next=39;break;case 36:t.prev=36,t.t1=t.catch(26),alert(t.t1);case 39:void 0===l&&(m=new Date,l=m.getTime()),r.onload=function(){var e=new Image;e.src=r.result;var t={img:e,key:l,name:"",hp:{max:0,min:0}};Y((function(e){return[].concat(Object(E.a)(e),[t])}))},r.readAsDataURL(o);case 42:case"end":return t.stop()}}),t,null,[[9,20],[26,36]])})))).apply(this,arguments)}function Oe(e){return e&&e.size>2e6?(alert("Please pick a file smaller than ".concat(2," MB.")),0):1}function we(e){return e&&e.size>2e5?(alert("Please pick a file smaller than ".concat(25," kb.")),0):1}return Object(n.useEffect)((function(){e.isTest&&function(){var e=new Image,t=new Image,a=new Array;e.src=ee.a,t.src=ae.a,console.log(e.src);var n={img:e,key:"testToken1",name:"Dax",hp:{max:0,min:0}},r={img:t,key:"testToken2",name:"Pop",hp:{max:0,min:0}};a.push(n),a.push(r),Y(a)}(),function(){ge.apply(this,arguments)}()}),[]),r.a.createElement("div",null,r.a.createElement(U,{mode:e.mode,gridScale:re,currentMap:X,mapScale:$,toDrop:de,setToDrop:pe}),r.a.createElement(A,{mode:e.mode,scaleGrid:function(e){var t=parseInt(e.target.value);ce(t)},scaleMap:function(e){var t=e.target.value/50;Q(t)},toggleMode:e.toggleMode,handleLogout:e.handleLogout,state:j}),r.a.createElement(x,{mode:e.mode,toggleTokens:ve,toggleMaps:ke,toggleOptions:function(){S(!j)},close:function(){S(!1),ie(!1),b("drawerClosed"),y("drawerClosed")}}),r.a.createElement(M,{mode:e.mode,state:g,getToken:function(e){return ye.apply(this,arguments)},tokens:L,deleteToken:function(e){return he.apply(this,arguments)},tokenInformation:function(e){for(var t=L.length,a=-1,n=0;n<t;++n)L[n].key===e&&(a=n);-1!==a&&(L[a].key===se.key?ie(!1):ie(L[a]))},dragHandler:function(e){pe(e)}}),r.a.createElement(P,{mode:e.mode,state:k,getMap:function(e){return Ee.apply(this,arguments)},maps:N,changeMap:function(e){var t=N[e.target.id[0]];H(t.img)},deleteMap:function(e,t){return be.apply(this,arguments)}}),r.a.createElement(_,{mode:e.mode,selected:se,updateTokenInfo:function(e){for(var t=Object(E.a)(L),a=t.length,n=0;n<a;++n)t[n].key===e.key&&(t[n]=e);Y(t)}}))};a(204);var re=function(e){var t=Object(n.useState)(function(){var e=localStorage.getItem("mode");return null===e?"light-mode":e}()),a=Object(f.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(f.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(!1),b=Object(f.a)(m,2),h=b[0],v=b[1];function E(){"light-mode"===c?(o("dark-mode"),localStorage.setItem("mode","dark-mode")):(o("light-mode"),localStorage.setItem("mode","light-mode"))}function y(){return(y=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.signOut();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:v(!1),u(!1);case 10:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){}),[]),r.a.createElement("div",{className:"App"},i||h?r.a.createElement(ne,{mode:c,isTest:h,toggleMode:E,handleLogout:function(){return y.apply(this,arguments)}}):r.a.createElement(k,{mode:c,toggleMode:E,setIsTest:v,setLoggedIn:u}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.configure({Auth:{mandatorySignIn:!0,region:u.REGION,userPoolId:u.USER_POOL_ID,identityPoolId:u.IDENTITY_POOL_ID,userPoolWebClientId:u.APP_CLIENT_ID},Storage:{region:s.REGION,bucket:s.BUCKET,identityPoolId:u.IDENTITY_POOL_ID},API:{endpoints:[{name:"gameboard",endpoint:i.URL,region:i.REGION}]}}),o.a.hydrate(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[127,1,2]]]);
//# sourceMappingURL=main.6d161218.chunk.js.map