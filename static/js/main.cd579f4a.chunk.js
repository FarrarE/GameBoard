(this.webpackJsonpgameboard=this.webpackJsonpgameboard||[]).push([[0],{126:function(e,t,a){e.exports=a(192)},131:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},165:function(e,t){},166:function(e,t){},167:function(e,t){},191:function(e,t,a){},192:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),c=a(55),s=a.n(c),o=a(20),l={REGION:"us-west-2",BUCKET:"gameboard-uploads"},i={REGION:"us-west-2",URL:"https://k6r2pgn41j.execute-api.us-west-2.amazonaws.com/prod"},u={REGION:"us-west-2",USER_POOL_ID:"us-west-2_55lKkN867",APP_CLIENT_ID:"1jtkpri800074n0e9amfsekbja",IDENTITY_POOL_ID:"us-west-2:d02cca9d-cd85-4f92-87bb-4e0ca6b75fdc"},p=(a(131),a(5)),m=a.n(p),d=a(29),f=a(12),g=a(6),b=a(77),v=a(109),h=a(36),k=a(110),E=a(75);a(133);var w=function(e){return r.a.createElement("div",{className:"tray"},r.a.createElement("div",{className:"edit-icon"},r.a.createElement(v.a,{onClick:e.toggleTokens})),r.a.createElement("div",{className:"edit-icon"},r.a.createElement(h.b,{onClick:e.toggleMaps})),r.a.createElement("div",{className:"edit-icon"},r.a.createElement(E.a,{onClick:e.close})),r.a.createElement("div",{className:"edit-icon"},r.a.createElement(k.a,{onClick:e.toggleOptions})))},y=a(57),O=a(58),x=a(70),j=a(69),S=function(e){Object(x.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).drag=function(e){e.dataTransfer.setData("transfer",e.target.src)},e.noAllowDrop=function(e){e.stopPropagation()},e}return Object(O.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,draggable:"true",onDragStart:this.drag,onDragOver:this.noAllowDrop},this.props.children)}}]),a}(r.a.Component),C=function(e){Object(x.a)(a,e);var t=Object(j.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,onDrop:this.props.drop,onDragOver:this.props.allowDrop},this.props.children)}}]),a}(r.a.Component),I="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E";a(134);var N=function(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)("show-options"),l=Object(g.a)(o,2),i=l[0];function u(e){s(parseInt(e.target.id[0]))}function p(e){s(null)}l[1];var m="token-drawer";return m="drawerDocked"===e.state?"token-drawer docked":"token-drawer",r.a.createElement("div",{className:m},r.a.createElement("div",{className:"token-container"},r.a.createElement("div",{className:"upload-form-token"},r.a.createElement("form",{action:"/action_page.php",className:"token-form"},r.a.createElement("label",{for:"token-input"},r.a.createElement("div",{className:"add-icon-token"},r.a.createElement(h.a,null))),r.a.createElement("input",{id:"token-input",type:"file",onChange:e.getToken}))),r.a.createElement("div",{className:"token-container"},e.tokens[0]?e.tokens.map((function(t,a){return r.a.createElement("div",{className:"token-img"},r.a.createElement(C,{id:a+"droppable"},r.a.createElement(S,{id:a+"token"},r.a.createElement("div",{className:"token-thumbnails"},c===a?r.a.createElement("img",{className:i+" token",alt:"...",id:a+"token",draggable:"true",src:t.img.src,onDoubleClick:u,onClick:p}):r.a.createElement("img",{className:"token",alt:"...",id:a+"token",draggable:"true",src:t.img.src,onDoubleClick:u,onClick:p}),r.a.createElement("img",{className:"delete-token",src:I,onClick:function(){return e.deleteToken(t.key)}})))))})):r.a.createElement("p",null,"Add a token. Drag and drop the token onto the grid. Scale token to grid by double clicking the token."))))};a(135);var D=function(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)("selected"),l=Object(g.a)(o,2),i=l[0],u=l[1];function p(t){s(parseInt(t.target.id[0])),e.changeMap(t),"selected show-options"===i&&u("selected")}function m(e){s(parseInt(e.target.id[0])),u("selected show-options"===i?"selected":"selected show-options")}var d="map-drawer";return d="drawerOpen"===e.state?"map-drawer open":"map-drawer",r.a.createElement("div",{className:d},r.a.createElement("div",{className:"map-container"},r.a.createElement("div",{className:"upload-form"},r.a.createElement("form",{action:"/action_page.php",className:"map-form"},r.a.createElement("label",{for:"map-file-input"},r.a.createElement("div",{className:"add-icon"},r.a.createElement(h.a,null))),r.a.createElement("input",{id:"map-file-input",type:"file",onChange:e.getMap}))),e.maps[0]?e.maps.map((function(t,a){return r.a.createElement("div",{className:"map-thumbnails"},c===a?r.a.createElement("img",{className:i+" map",src:t.img.src,alt:"...",id:a+"m",onClick:p,onDoubleClick:m}):r.a.createElement("img",{className:"map",src:t.img.src,alt:"...",id:a+"map",onClick:p,onDoubleClick:m}),r.a.createElement("img",{className:"delete-map",src:I,onClick:function(){return e.deleteMap(t.key)}}))})):r.a.createElement("p",null,"Add a map. Switch maps by clicking on the thumbnails.")))},K=a(111),T=a.n(K),P=a(76);a(142);var L=function(e){return r.a.createElement(T.a,{handle:".handle"},r.a.createElement("div",{className:"options"},r.a.createElement("div",null,r.a.createElement(P.a,{className:"drag-icon handle"})),r.a.createElement("div",null,"Grid Size"),r.a.createElement("div",null,r.a.createElement("input",{type:"range",min:"10",max:"100",class:"slider",onInput:e.scaleGrid.bind(this)})),r.a.createElement("div",null,"Map Size"),r.a.createElement("div",null,r.a.createElement("input",{type:"range",min:"10",max:"100",class:"slider",onInput:e.scaleMap.bind(this)})),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("div",{className:"logout-button",onClick:e.handleLogout.bind(this)},r.a.createElement("span",null,"Log Out")))))};a(143);var M=function(e){var t=Object(n.useState)(void 0),a=Object(g.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(void 0),l=Object(g.a)(o,2),i=l[0],u=l[1];return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"ribbon"},r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,"Battlemaps"),r.a.createElement("p",null,"Virtual Tabletop Toolset")),r.a.createElement("div",{className:"login-form"},r.a.createElement("form",{onSubmit:function(t){e.handleSubmit(c,i),t.preventDefault()}},r.a.createElement("input",{autoFocus:!0,type:"email",value:c,placeholder:"Email",onChange:function(e){return s(e.target.value)}}),r.a.createElement("input",{value:i,placeholder:"Password",onChange:function(e){return u(e.target.value)},type:"password"}),r.a.createElement("button",{className:"login-button",disabled:!function(){if(c&&i)return c.length>0&&i.length>0}(),type:"submit",tabIndex:"3"},r.a.createElement("span",null,"Login"))),r.a.createElement("div",{className:"links"},r.a.createElement("span",null,"Dont have an account?"),r.a.createElement("a",{onClick:e.signUp,tabIndex:"1"},r.a.createElement("span",null," Sign up here")),r.a.createElement("span",null,"or"),r.a.createElement("a",{onClick:e.runTest,tabIndex:"2"},r.a.createElement("span",null,"Try without signing up"))))))};a(144);function U(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(!1),l=Object(g.a)(o,2),i=(l[0],l[1]),u=Object(n.useState)(null),p=Object(g.a)(u,2),d=p[0],v=p[1],h=Object(n.useState)(null),k=Object(g.a)(h,2),E=k[0],w=k[1],y=Object(n.useState)(null),O=Object(g.a)(y,2),x=O[0],j=O[1],S=Object(n.useState)(null),C=Object(g.a)(S,2),I=C[0],N=C[1];function D(e){return K.apply(this,arguments)}function K(){return(K=Object(f.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),E===x){e.next=4;break}return alert("Passwords do not match"),e.abrupt("return");case 4:return i(!0),e.prev=5,e.next=8,b.a.signUp({username:d,password:E});case 8:a=e.sent,i(!1),s(a),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),alert(e.t0.message),i(!1);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}function T(e){return P.apply(this,arguments)}function P(){return(P=Object(f.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),i(!0),t.prev=2,t.next=5,b.a.confirmSignUp(d,I);case 5:return t.next=7,b.a.signIn(d,E);case 7:e.confirmSignUp(),e.userHasAuthenticated(!0),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),alert(t.t0.message),i(!1);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"signup-page"},null===c?r.a.createElement("div",{className:"ribbon"},r.a.createElement("div",{className:"signup-card"},r.a.createElement("form",{onSubmit:D,className:"signup-form"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{autoFocus:!0,type:"email",onChange:function(e){return v(e.target.value)}}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",onChange:function(e){return w(e.target.value)}}),r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{type:"password",onChange:function(e){return j(e.target.value)}}),r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:e.confirmSignUp},"Back"),r.a.createElement("span",null," "),r.a.createElement("button",{type:"submit"},"Submit"))))):r.a.createElement("div",{className:"ribbon confirmation"},r.a.createElement("form",{onSubmit:T},r.a.createElement("label",null,"Confirmation Code "),r.a.createElement("input",{autoFocus:!0,type:"tel",onChange:function(e){return N(e.target.value)}}),r.a.createElement("button",null,"Submit"),r.a.createElement("h1",null,"Please check your email for the code."))))}var _=a(28);var A=function(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(null),l=Object(g.a)(o,2),i=l[0],u=l[1],p=Object(n.useState)(null),m=Object(g.a)(p,2),d=m[0],f=m[1],b=Object(n.useState)(null),v=Object(g.a)(b,2),h=v[0],k=v[1];function E(e,t){var a=document.body.clientWidth,n=document.body.clientHeight,r=e.getObjects("line");for(var c in r)e.remove(r[c]);for(var s=0;s<n/t;s++)e.add(new _.fabric.Line([0,s*t,a,s*t],{stroke:"grey",selectable:!1}));for(var o=0;o<a/t;o++)e.add(new _.fabric.Line([o*t,0,o*t,n],{stroke:"grey",selectable:!1}))}function w(t){if(t){var a=e.mapScale,n=document.body.clientWidth,r=document.body.clientHeight;if(t){var s=n/2-t.width/2*a,o=r/2-t.height/2*a;_.fabric.Image.fromURL(t.src,(function(e){var t=e.set({left:s,top:o,selectable:!1}).scale(a);c.setBackgroundImage(t),c.renderAll()}))}}}function y(e,t){e.off(),e.on("object:moving",(function(e){e.target.left=Math.round(e.target.left/t)*t,e.target.top=Math.round(e.target.top/t)*t,e.target.setCoords()})),e.on("mouse:dblclick",(function(a){var n=e.getActiveObject();n&&(n.scaleToWidth(t),n.scaleToHeight(t),e.renderAll())}))}function O(){var e=document.createElement("img");return e.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E",function(t,a,n,r,c){var s=this.cornerSize;t.save(),t.translate(a,n),t.rotate(_.fabric.util.degreesToRadians(c.angle)),t.drawImage(e,-s/2,-s/2,s,s),t.restore()}}function x(e,t){var a=t.canvas;a.remove(t),a.requestRenderAll()}return Object(n.useEffect)((function(){!function(){if(c)e.gridScale!==h&&(y(c,e.gridScale),E(c,e.gridScale),k(e.gridScale)),e.currentMap!==i|e.mapScale!==d&&(w(e.currentMap),u(e.currentMap),f(e.mapScale));else{var t=new _.fabric.Canvas("canvas",{selection:!1});s(t),y(t,e.gridScale),E(t,e.gridScale),w(e.currentMap),_.fabric.Object.prototype.controls.deleteControl=new _.fabric.Control({x:.5,y:-.5,offsetY:-16,offsetX:16,cursorStyle:"pointer",mouseUpHandler:x,render:O(),cornerSize:24}),k(e.gridScale),f(e.mapScale),u(e.currentMap)}}()}),[e.currentMap,e.gridScale,e.mapScale]),r.a.createElement(C,{drop:function(t){t.preventDefault();var a=t.dataTransfer.getData("transfer"),n=new Image;n.src=a;var r=t.clientX,s=t.clientY;!function(t,a,n){_.fabric.Image.fromURL(t.src,(function(t){var r=t.set({left:a,top:n});r.scaleToWidth(e.gridScale),r.scaleToHeight(e.gridScale),c.add(r)}))}(n,r,s)},allowDrop:function(e){e.preventDefault()}},r.a.createElement("canvas",{id:"canvas",width:document.body.clientWidth,height:document.body.clientHeight}))},R=a(201);function G(){return(G=Object(f.a)(m.a.mark((function e(t,a,n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(Date.now()).concat(n),e.next=3,R.a.vault.put(r,t,{contentType:a});case 3:return c=e.sent,e.abrupt("return",c.key);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=function(e,t,a){return G.apply(this,arguments)};function F(){return(F=Object(f.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.vault.get(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=function(e){return F.apply(this,arguments)},W=a(202);function H(e){return W.a.post("gameboard","/gameboard",{body:e})}function z(){return V.apply(this,arguments)}function V(){return(V=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.a.get("gameboard","/gameboard"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){return W.a.put("gameboard","/gameboard/".concat(t),{body:e})}function X(e,t,a){return q.apply(this,arguments)}function q(){return(q=Object(f.a)(m.a.mark((function e(t,a,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={db:null,s3:null},e.next=3,J(a,t);case 3:return r.db=e.sent,e.next=6,R.a.vault.remove(n);case 6:return r.s3=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(191);var $=function(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)({gameId:null,mapKeys:[],tokenKeys:[]}),l=Object(g.a)(o,2),i=l[0],u=(l[1],Object(n.useState)("drawerClosed")),p=Object(g.a)(u,2),v=p[0],h=p[1],k=Object(n.useState)("drawerClosed"),E=Object(g.a)(k,2),y=E[0],O=E[1],x=Object(n.useState)(!1),j=Object(g.a)(x,2),S=j[0],C=j[1],I=Object(n.useState)([]),K=Object(g.a)(I,2),T=K[0],P=K[1],_=Object(n.useState)([]),R=Object(g.a)(_,2),G=R[0],F=R[1],W=Object(n.useState)(null),V=Object(g.a)(W,2),q=V[0],$=V[1],Q=Object(n.useState)(1),Z=Object(g.a)(Q,2),ee=Z[0],te=Z[1],ae=Object(n.useState)(50),ne=Object(g.a)(ae,2),re=ne[0],ce=ne[1],se=Object(n.useState)(!1),oe=Object(g.a)(se,2),le=oe[0],ie=oe[1],ue=Object(n.useState)(!0),pe=Object(g.a)(ue,2),me=(pe[0],pe[1],Object(n.useState)(!1)),de=Object(g.a)(me,2),fe=de[0],ge=de[1],be=Object(n.useState)(!1),ve=Object(g.a)(be,2),he=ve[0],ke=ve[1];function Ee(e,t){return{content:{maps:e,tokens:t}}}function we(){return(we=Object(f.a)(m.a.mark((function e(){var t,a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fe&&!he){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,z();case 5:if(!(t=e.sent)[0]){e.next=25;break}s(t),i.gameId=t[0].gameid,i.mapKeys=t[0].content.maps,i.tokenKeys=t[0].content.tokens,a=m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(i.mapKeys[t]);case 2:a=e.sent,(n=new Image).src=a,r={img:n,key:i.mapKeys[t]},P((function(e){return[].concat(Object(d.a)(e),[r])}));case 7:case"end":return e.stop()}}),e)})),n=0;case 13:if(!(n<i.mapKeys.length)){e.next=18;break}return e.delegateYield(a(n),"t0",15);case 15:++n,e.next=13;break;case 18:r=m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(i.tokenKeys[t]);case 2:a=e.sent,(n=new Image).src=a,r={img:n,key:i.tokenKeys[t]},F((function(e){return[].concat(Object(d.a)(e),[r])}));case 7:case"end":return e.stop()}}),e)})),c=0;case 20:if(!(c<i.tokenKeys.length)){e.next=25;break}return e.delegateYield(r(c),"t1",22);case 22:++c,e.next=20;break;case 25:e.next=29;break;case 27:e.prev=27,e.t2=e.catch(2);case 29:case"end":return e.stop()}}),e,null,[[2,27]])})))).apply(this,arguments)}function ye(){return(ye=Object(f.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=i.mapKeys.indexOf(t))>-1&&(i.mapKeys.splice(a,1),(n=Object(d.a)(T)).splice(a,1),P(n)),r=Ee(i.mapKeys,i.tokenKeys),e.next=6,X(i.gameId,r,t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Oe(){return(Oe=Object(f.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=i.tokenKeys.indexOf(t))>-1&&(i.tokenKeys.splice(a,1),(n=Object(d.a)(G)).splice(a,1),F(n)),r=Ee(i.mapKeys,i.tokenKeys),e.next=6,X(i.gameId,r,t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function xe(){return(xe=Object(f.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.signIn(t,a);case 3:Ie(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert("Login error:"+e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function je(){return(je=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.currentSession();case 3:Ie(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function Se(){return(Se=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.signOut();case 2:ge(!1),F([]),P([]),$(null),ce(50),te(1),ke(!1),Ne();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(){ie(!1)}function Ie(){ge(!0)}function Ne(){C(!1),h("drawerClosed"),O("drawerClosed")}function De(){"drawerOpen"===y&&Ke(),h("drawerClosed"===v?"drawerDocked":"drawerClosed")}function Ke(){"drawerDocked"===v&&De(),O("drawerClosed"===y?"drawerOpen":"drawerClosed")}function Te(){return(Te=Object(f.a)(m.a.mark((function e(t){var a,n,r,s,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files,n=new FileReader,Le(r=a[0])){e.next=5;break}return e.abrupt("return");case 5:if(!(T.length>4)){e.next=8;break}return alert("You cannot have more than 5 maps uploaded during this stage of development."),e.abrupt("return");case 8:if(c||he){e.next=25;break}return e.prev=9,e.next=12,B(r,r.type,"map");case 12:return s=e.sent,e.next=15,H(Ee(i.mapKeys,i.tokenKeys));case 15:o=e.sent,i.gameId=o.gameid,i.mapKeys=[s],e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),alert(e.t0);case 23:e.next=39;break;case 25:if(he){e.next=39;break}return e.prev=26,e.next=29,B(r,r.type,"map");case 29:return s=e.sent,l=i.mapKeys,i.mapKeys=[].concat(Object(d.a)(l),[s]),e.next=34,J(Ee(i.mapKeys,i.tokenKeys),i.gameId);case 34:e.next=39;break;case 36:e.prev=36,e.t1=e.catch(26),alert(e.t1);case 39:n.onload=function(){var e=new Image;e.src=n.result;var t={img:e,key:s};P((function(e){return[].concat(Object(d.a)(e),[t])}))},n.readAsDataURL(r);case 41:case"end":return e.stop()}}),e,null,[[9,20],[26,36]])})))).apply(this,arguments)}function Pe(){return(Pe=Object(f.a)(m.a.mark((function e(t){var a,n,r,s,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files,n=new FileReader,Me(r=a[0])){e.next=5;break}return e.abrupt("return");case 5:if(!(G.length>9)){e.next=8;break}return alert("You cannot have more than 10 tokens uploaded during this stage of development."),e.abrupt("return");case 8:if(c||he){e.next=25;break}return e.prev=9,e.next=12,B(r,r.type,"token");case 12:return s=e.sent,e.next=15,H(Ee(i.mapKeys,i.tokenKeys));case 15:o=e.sent,i.gameId=o.gameid,i.tokenKeys=[s],e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),alert(e.t0);case 23:e.next=39;break;case 25:if(he){e.next=39;break}return e.prev=26,e.next=29,B(r,r.type,"token");case 29:return s=e.sent,l=i.tokenKeys,i.tokenKeys=[].concat(Object(d.a)(l),[s]),e.next=34,J(Ee(i.mapKeys,i.tokenKeys),i.gameId);case 34:e.next=39;break;case 36:e.prev=36,e.t1=e.catch(26),alert(e.t1);case 39:n.onload=function(){var e=new Image;e.src=n.result;var t={img:e,key:s};F((function(e){return[].concat(Object(d.a)(e),[t])}))},n.readAsDataURL(r);case 41:case"end":return e.stop()}}),e,null,[[9,20],[26,36]])})))).apply(this,arguments)}function Le(e){return e&&e.size>2e5?(alert("Please pick a file smaller than ".concat(.2," MB.")),0):1}function Me(e){return e&&e.size>16e4?(alert("Please pick a file smaller than ".concat(20," kb.")),0):1}return Object(n.useEffect)((function(){!function(){je.apply(this,arguments)}(),function(){we.apply(this,arguments)}()}),[fe]),r.a.createElement("div",{className:"App"},le&&r.a.createElement(U,{userHasAuthenticated:ge,confirmSignUp:Ce}),fe?r.a.createElement(A,{gridScale:re,currentMap:q,mapScale:ee}):r.a.createElement(M,{runTest:function(){ge(!0),ke(!0)},authenticateLogin:Ie,signUp:function(){ie(!0)},confirmSignUp:Ce,handleSubmit:function(e,t){return xe.apply(this,arguments)}}),S&&r.a.createElement(L,{scaleGrid:function(e){var t=parseInt(e.target.value);ce(t)},scaleMap:function(e){var t=e.target.value/50;te(t)},handleLogout:function(){return Se.apply(this,arguments)}}),r.a.createElement(w,{toggleTokens:De,toggleMaps:Ke,toggleOptions:function(){C(!S)},close:Ne}),r.a.createElement(N,{state:v,getToken:function(e){return Pe.apply(this,arguments)},tokens:G,deleteToken:function(e){return Oe.apply(this,arguments)}}),r.a.createElement(D,{state:y,getMap:function(e){return Te.apply(this,arguments)},maps:T,changeMap:function(e){var t=T[e.target.id[0]];$(t.img)},deleteMap:function(e){return ye.apply(this,arguments)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.configure({Auth:{mandatorySignIn:!0,region:u.REGION,userPoolId:u.USER_POOL_ID,identityPoolId:u.IDENTITY_POOL_ID,userPoolWebClientId:u.APP_CLIENT_ID},Storage:{region:l.REGION,bucket:l.BUCKET,identityPoolId:u.IDENTITY_POOL_ID},API:{endpoints:[{name:"gameboard",endpoint:i.URL,region:i.REGION}]}}),s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[126,1,2]]]);
//# sourceMappingURL=main.cd579f4a.chunk.js.map